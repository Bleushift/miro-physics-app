<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Physics Pathway â€“ Miro Tools</title>

  <!-- KaTeX for client-side LaTeX rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"></script>

  <!-- html2canvas for rasterising equations (Miro requires PNG/JPEG) -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- Miro SDK -->
  <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>

  <style>
    :root {
      --black:  #1a1a2e;
      --purple: #a78bfa;
      --teal:   #5eead4;
      --yellow: #fbbf24;
      --bg:     #1e1e2e;
      --surface:#26263a;
      --border: #38385a;
      --text:   #e2e2f0;
      --muted:  #888aaa;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      font-size: 13px;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* â”€â”€ Tab bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tabs {
      display: flex;
      background: var(--black);
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }
    .tab {
      flex: 1;
      padding: 8px 4px;
      text-align: center;
      cursor: pointer;
      color: var(--muted);
      font-size: 11px;
      font-weight: 500;
      border-bottom: 2px solid transparent;
      transition: all 0.15s;
      white-space: nowrap;
    }
    .tab:hover { color: var(--text); }
    .tab.active { color: var(--purple); border-bottom-color: var(--purple); }

    /* â”€â”€ Panel pages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page { display: none; flex-direction: column; flex: 1; overflow: hidden; }
    .page.active { display: flex; }

    .scroll { overflow-y: auto; flex: 1; padding: 10px; }
    .scroll::-webkit-scrollbar { width: 4px; }
    .scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

    /* â”€â”€ Shared components â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    label { display: block; color: var(--muted); font-size: 11px; margin-bottom: 4px; margin-top: 10px; text-transform: uppercase; letter-spacing: 0.05em; }
    label:first-child { margin-top: 0; }

    textarea, input[type="text"], input[type="url"] {
      width: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      padding: 8px;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      resize: vertical;
      outline: none;
      transition: border-color 0.15s;
    }
    textarea:focus, input:focus { border-color: var(--purple); }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      padding: 7px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.15s;
    }
    .btn-primary  { background: var(--purple); color: #fff; }
    .btn-primary:hover  { background: #9370e8; }
    .btn-teal     { background: var(--teal);   color: var(--black); }
    .btn-teal:hover     { background: #4dd4be; }
    .btn-yellow   { background: var(--yellow); color: var(--black); }
    .btn-yellow:hover   { background: #f5a800; }
    .btn-ghost    { background: var(--surface); color: var(--text); border: 1px solid var(--border); }
    .btn-ghost:hover    { border-color: var(--purple); color: var(--purple); }
    .btn-sm { padding: 4px 8px; font-size: 11px; }
    .btn-full { width: 100%; }
    .btn:disabled { opacity: 0.4; cursor: not-allowed; }

    .row { display: flex; gap: 6px; align-items: center; }
    .row .btn { flex-shrink: 0; }
    .spacer { height: 10px; }

    /* â”€â”€ Quick LaTeX toolbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .quick-latex {
      display: flex;
      flex-wrap: wrap;
      gap: 3px;
      margin-top: 6px;
      margin-bottom: 4px;
    }
    .quick-latex button {
      background: var(--black);
      border: 1px solid var(--border);
      color: var(--teal);
      border-radius: 4px;
      padding: 3px 7px;
      font-size: 13px;
      cursor: pointer;
      font-family: 'Courier New', monospace;
      transition: all 0.12s;
      line-height: 1.2;
    }
    .quick-latex button:hover {
      border-color: var(--purple);
      background: var(--surface);
      color: var(--purple);
    }

    /* â”€â”€ LaTeX preview â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #latex-preview {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      min-height: 56px;
      padding: 10px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 8px;
      overflow: auto;
    }
    #latex-preview .katex { color: #fff; }
    #latex-preview .error-msg { color: #f87171; font-size: 11px; }

    /* â”€â”€ Colour row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .colour-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
    }
    .colour-swatch {
      width: 26px; height: 26px;
      border-radius: 50%;
      border: 2px solid transparent;
      cursor: pointer;
      flex-shrink: 0;
      transition: border-color 0.15s;
    }
    .colour-swatch.selected { border-color: #fff; }
    .bg-swatch {
      width: 26px; height: 26px;
      border-radius: 6px;
      border: 2px solid transparent;
      cursor: pointer;
      flex-shrink: 0;
      transition: border-color 0.15s;
      position: relative;
    }
    .bg-swatch.selected { border-color: #fff; }
    input[type="color"] {
      width: 26px; height: 26px;
      border: none; border-radius: 50%;
      padding: 0; cursor: pointer;
      background: none;
      flex-shrink: 0;
    }
    .text-colour-btn {
      width: 22px; height: 22px;
      border-radius: 4px;
      cursor: pointer;
      flex-shrink: 0;
      transition: all 0.15s;
      border: 2px solid transparent;
    }
    .text-colour-btn:hover { border-color: #fff; transform: scale(1.15); }

    .size-label { color: var(--muted); font-size: 11px; white-space: nowrap; }
    input[type="range"] { flex: 1; accent-color: var(--purple); }

    /* â”€â”€ Edit banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #edit-banner {
      display: none;
      background: #2a1f4e;
      border: 1px solid var(--purple);
      border-radius: 6px;
      padding: 7px 10px;
      margin-bottom: 8px;
      font-size: 11px;
      color: var(--purple);
      align-items: center;
      gap: 8px;
    }
    #edit-banner.visible { display: flex; }
    #edit-banner span { flex: 1; }

    /* â”€â”€ Library search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #lib-search {
      width: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      padding: 7px 10px;
      font-size: 12px;
      outline: none;
      margin-bottom: 8px;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    #lib-search:focus { border-color: var(--purple); }
    #lib-search::placeholder { color: var(--muted); }
    .lib-tag {
      display: inline-block;
      background: #2a1f4e;
      color: var(--purple);
      font-size: 9px;
      padding: 1px 5px;
      border-radius: 3px;
      margin-left: 6px;
      font-weight: 600;
    }

    /* â”€â”€ Physics library â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .lib-section { margin-bottom: 6px; }
    .lib-section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      padding: 6px 8px;
      background: var(--black);
      border: 1px solid var(--border);
      border-radius: 5px;
      margin-bottom: 4px;
      user-select: none;
    }
    .lib-section-header:hover { border-color: var(--purple); }
    .lib-section-header h3 {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--purple);
      margin: 0;
    }
    .lib-section-header .toggle { color: var(--muted); font-size: 10px; transition: transform 0.2s; }
    .lib-section-header.open .toggle { transform: rotate(90deg); }
    .lib-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 3px;
      margin-bottom: 8px;
    }
    .lib-grid.collapsed { display: none; }
    .lib-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 5px;
      padding: 6px 8px;
      cursor: pointer;
      transition: all 0.15s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .lib-item:hover { border-color: var(--teal); background: #1e2e32; }
    .lib-item .eq-name { font-size: 11px; color: var(--muted); min-width: 80px; flex-shrink: 0; }
    .lib-item .eq-katex { font-size: 16px; flex: 1; }
    .lib-item .eq-katex .katex { color: var(--teal); }
    .lib-item .eq-pills { display: flex; gap: 2px; flex-shrink: 0; flex-wrap: wrap; }
    .lib-item .eq-pill {
      font-size: 8px;
      font-weight: 700;
      padding: 1px 4px;
      border-radius: 6px;
      line-height: 1.4;
    }
    .eq-pill.aqa { background: rgba(124,58,237,0.2); color: #a78bfa; }
    .eq-pill.edexcel { background: rgba(59,130,246,0.2); color: #60a5fa; }
    .eq-pill.ocr { background: rgba(16,185,129,0.2); color: #34d399; }
    .eq-pill.on-sheet { background: rgba(251,191,36,0.15); color: var(--yellow); font-size: 7px; }

    /* â”€â”€ Embed panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .embed-type {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px;
      margin-bottom: 10px;
    }
    .embed-btn {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px;
      cursor: pointer;
      text-align: center;
      transition: all 0.15s;
      color: var(--text);
    }
    .embed-btn:hover { border-color: var(--teal); }
    .embed-btn.active { border-color: var(--teal); background: #1e2e32; color: var(--teal); }
    .embed-btn .icon { font-size: 18px; display: block; margin-bottom: 3px; }
    .embed-btn .name { font-size: 10px; font-weight: 600; display: block; }
    .embed-btn .note { font-size: 9px; color: var(--muted); margin-top: 1px; display: block; }

    .embed-form { display: none; }
    .embed-form.visible { display: block; }

    .info-box {
      background: #1a2e1a;
      border: 1px solid #2d5a2d;
      border-radius: 6px;
      padding: 8px 10px;
      font-size: 11px;
      color: #86efac;
      margin-top: 6px;
    }
    .warn-box {
      background: #2e1a1a;
      border: 1px solid #5a2d2d;
      border-radius: 6px;
      padding: 8px 10px;
      font-size: 11px;
      color: #fca5a5;
      margin-top: 6px;
    }

    /* â”€â”€ Status toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #toast {
      position: fixed; bottom: 12px; left: 50%; transform: translateX(-50%);
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 6px 14px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.2s;
      pointer-events: none;
      white-space: nowrap;
      z-index: 999;
    }
    #toast.show { opacity: 1; }

    .geogebra-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 3px;
      max-height: 300px;
      overflow-y: auto;
    }
    .ggb-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 5px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.15s;
    }
    .ggb-item:hover { border-color: var(--yellow); color: var(--yellow); }

    .phet-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4px;
      max-height: 200px;
      overflow-y: auto;
    }
    .phet-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 5px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 11px;
      transition: all 0.15s;
    }
    .phet-item:hover { border-color: var(--yellow); color: var(--yellow); }

    /* â”€â”€ Board filter chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .board-filter {
      display: flex;
      gap: 4px;
      margin-bottom: 6px;
    }
    .board-chip {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 3px 10px;
      cursor: pointer;
      font-size: 10px;
      font-weight: 600;
      transition: all 0.15s;
      color: var(--muted);
    }
    .board-chip:hover { border-color: var(--purple); color: var(--purple); }
    .board-chip.active { border-color: var(--purple); background: rgba(167,139,250,0.15); color: var(--purple); }

    /* â”€â”€ External sims grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .ext-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 3px;
      max-height: 340px;
      overflow-y: auto;
    }
    .ext-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 5px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.15s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .ext-item:hover { border-color: var(--teal); color: var(--teal); }
    .ext-item .ext-name { flex: 1; }
    .ext-item .ext-source {
      font-size: 9px;
      color: var(--muted);
      background: var(--bg);
      border-radius: 8px;
      padding: 1px 6px;
      margin-left: 6px;
      flex-shrink: 0;
    }
    .ext-item .ext-boards {
      font-size: 8px;
      color: var(--purple);
      margin-left: 4px;
      flex-shrink: 0;
    }

    /* â”€â”€ Circuit components grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .circuit-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4px;
    }
    .circuit-category {
      grid-column: 1 / -1;
      font-size: 9px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--muted);
      padding: 6px 0 2px;
    }
    .circuit-category:first-child { padding-top: 0; }
    .circuit-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 5px;
      padding: 8px 4px 6px;
      cursor: pointer;
      text-align: center;
      transition: all 0.15s;
    }
    .circuit-item:hover { border-color: var(--teal); background: #1e2e32; }
    .circuit-item svg { width: 52px; height: 28px; display: block; margin: 0 auto 4px; }
    .circuit-item .cname { font-size: 9px; color: var(--muted); line-height: 1.2; }

    /* â”€â”€ Reveal size presets â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .reveal-size {
      flex: 1;
      transition: all 0.15s;
    }
    .reveal-size.active {
      border-color: var(--purple);
      color: var(--purple);
    }
  </style>
</head>
<body>

<!-- â”€â”€ Tab bar â”€â”€ -->
<div class="tabs">
  <div class="tab active" data-tab="latex">ğ‘“(ğ‘¥)</div>
  <div class="tab" data-tab="library">Library</div>
  <div class="tab" data-tab="embeds">Embeds</div>
  <div class="tab" data-tab="circuits">Circuits</div>
  <div class="tab" data-tab="tools">Tools</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 1: LaTeX Editor
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page active" id="page-latex">
  <div class="scroll">

    <!-- Edit banner shown when an existing equation is selected -->
    <div id="edit-banner">
      <span>âœï¸ Editing selected equation</span>
      <button class="btn btn-ghost btn-sm" id="btn-cancel-edit">Cancel</button>
    </div>

    <label>LaTeX expression</label>
    <textarea id="latex-input" rows="4" placeholder="e.g. v^2 = u^2 + 2as"></textarea>

    <div class="quick-latex" id="quick-latex">
      <button data-ins="\frac{â–¢}{â–¢}" title="Fraction">Â½</button>
      <button data-ins="^{â–¢}" title="Superscript">xÂ²</button>
      <button data-ins="_{â–¢}" title="Subscript">xâ‚‚</button>
      <button data-ins="\sqrt{â–¢}" title="Square root">âˆš</button>
      <button data-ins="\vec{â–¢}" title="Vector">vâƒ—</button>
      <button data-ins="\Delta " title="Delta">Î”</button>
      <button data-ins="\theta" title="Theta">Î¸</button>
      <button data-ins="\lambda" title="Lambda">Î»</button>
      <button data-ins="\omega" title="Omega">Ï‰</button>
      <button data-ins="\pi" title="Pi">Ï€</button>
      <button data-ins="\mu" title="Mu">Î¼</button>
      <button data-ins="\varepsilon" title="Epsilon">Îµ</button>
      <button data-ins="\sum" title="Summation">Î£</button>
      <button data-ins="\int" title="Integral">âˆ«</button>
      <button data-ins="\infty" title="Infinity">âˆ</button>
      <button data-ins="\times " title="Times">Ã—</button>
      <button data-ins="\cdot " title="Dot">Â·</button>
      <button data-ins="\rightarrow " title="Arrow">â†’</button>
      <button data-ins="\text{â–¢}" title="Plain text">Aa</button>
      <button data-ins="\dfrac{â–¢}{â–¢}" title="Display fraction">â–¢/â–¢</button>
    </div>

    <label style="margin-top:8px">Colour selected text <span style="color:var(--muted);font-size:10px">(select text above, then click)</span></label>
    <div class="colour-row" id="text-colour-row">
      <div class="text-colour-btn" style="background:#7C3AED" data-tc="#7C3AED" title="PP Purple"></div>
      <div class="text-colour-btn" style="background:#A78BFA" data-tc="#A78BFA" title="PP Lavender"></div>
      <div class="text-colour-btn" style="background:#5eead4" data-tc="#5eead4" title="PP Teal"></div>
      <div class="text-colour-btn" style="background:#E11D48" data-tc="#E11D48" title="PP Red"></div>
      <div class="text-colour-btn" style="background:#fbbf24" data-tc="#fbbf24" title="Yellow"></div>
      <div class="text-colour-btn" style="background:#ffffff; border:1px solid var(--border)" data-tc="#ffffff" title="White"></div>
      <div class="text-colour-btn" style="background:#343a40" data-tc="#343a40" title="Charcoal"></div>
      <button class="btn btn-ghost btn-sm" id="btn-remove-colour" title="Remove colour from selection" style="font-size:10px;padding:3px 6px;">âœ•</button>
    </div>

    <div id="latex-preview">
      <span style="color:var(--muted); font-size:11px">Preview will appear here</span>
    </div>

    <label style="margin-top:12px">Whole equation colour</label>
    <div class="colour-row">
      <div class="colour-swatch selected" style="background:#343a40" data-colour="#343a40" title="Charcoal"></div>
      <div class="colour-swatch" style="background:#7C3AED" data-colour="#7C3AED" title="PP Purple"></div>
      <div class="colour-swatch" style="background:#A78BFA" data-colour="#A78BFA" title="PP Lavender"></div>
      <div class="colour-swatch" style="background:#5eead4" data-colour="#5eead4" title="PP Teal"></div>
      <div class="colour-swatch" style="background:#E11D48" data-colour="#E11D48" title="PP Red"></div>
      <div class="colour-swatch" style="background:#ffffff" data-colour="#ffffff" title="White"></div>
      <div class="colour-swatch" style="background:#1e1e1e" data-colour="#1e1e1e" title="Dark Grey"></div>
      <input type="color" id="custom-colour" value="#343a40" title="Custom colour" />
    </div>

    <label style="margin-top:10px">Size <span id="size-val" style="color:var(--text)">36px</span></label>
    <div class="row">
      <span class="size-label">S</span>
      <input type="range" id="font-size" min="16" max="96" value="36" step="4" />
      <span class="size-label">XL</span>
    </div>

    <label style="margin-top:10px">Background <span id="bg-label" style="color:var(--muted);font-size:10px">(none)</span></label>
    <div class="colour-row">
      <div class="bg-swatch selected" data-bg="none" title="No background" style="background:repeating-conic-gradient(#333 0% 25%, #555 0% 50%) 50%/8px 8px; position:relative"><span style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:10px;color:#fff">âœ•</span></div>
      <div class="bg-swatch" data-bg="#ffffff" title="White" style="background:#ffffff"></div>
      <div class="bg-swatch" data-bg="#1e1e1e" title="Dark" style="background:#1e1e1e"></div>
      <div class="bg-swatch" data-bg="#F5F3FF" title="Lavender" style="background:#F5F3FF"></div>
      <div class="bg-swatch" data-bg="#FEF9C3" title="Yellow" style="background:#FEF9C3"></div>
      <div class="bg-swatch" data-bg="#ECFDF5" title="Mint" style="background:#ECFDF5"></div>
      <input type="color" id="custom-bg" value="#ffffff" title="Custom background" />
    </div>

    <label style="margin-top:8px">Border radius <span id="radius-val" style="color:var(--text)">8px</span></label>
    <div class="row">
      <span class="size-label">â–¡</span>
      <input type="range" id="bg-radius" min="0" max="24" value="8" step="2" />
      <span class="size-label">â—¯</span>
    </div>

    <div class="spacer"></div>
    <div class="row">
      <button class="btn btn-primary btn-full" id="btn-place">Place on board</button>
      <button class="btn btn-ghost" id="btn-place-update" style="display:none">Update</button>
    </div>

    <div class="spacer"></div>
    <label>Selection</label>
    <button class="btn btn-ghost btn-full" id="btn-load-selection">â†‘ Load selected equation for editing</button>

  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 2: Physics Library
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page-library">
  <div class="scroll" id="library-scroll">
    <div class="board-filter" id="lib-board-filter">
      <span class="board-chip active" data-board="all">All</span>
      <span class="board-chip" data-board="AQA">AQA</span>
      <span class="board-chip" data-board="Edexcel">Edexcel</span>
      <span class="board-chip" data-board="OCR">OCR</span>
      <span class="board-chip" data-board="sheet" style="margin-left:auto;border-color:var(--yellow);color:var(--yellow)">ğŸ“‹ Sheet</span>
    </div>
    <input type="text" id="lib-search" placeholder="Search equations... (e.g. SUVAT, capacitor, Snell)" />
    <div id="lib-sections"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 3: Embeds
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page-embeds">
  <div class="scroll">

    <label>Tool</label>
    <div class="embed-type">
      <div class="embed-btn active" data-embed="youtube">
        <span class="icon">â–¶</span>
        <span class="name">YouTube</span>
        <span class="note">Native embed</span>
      </div>
      <div class="embed-btn" data-embed="geogebra">
        <span class="icon">ğŸ“</span>
        <span class="name">GeoGebra</span>
        <span class="note">Interactive</span>
      </div>
      <div class="embed-btn" data-embed="phet">
        <span class="icon">âš›</span>
        <span class="name">PhET Sim</span>
        <span class="note">Interactive</span>
      </div>
      <div class="embed-btn" data-embed="isaac">
        <span class="icon">ğŸ”¬</span>
        <span class="name">Isaac Physics</span>
        <span class="note">Opens tab</span>
      </div>
      <div class="embed-btn" data-embed="external">
        <span class="icon">ğŸŒ</span>
        <span class="name">External Sims</span>
        <span class="note">Opens tab</span>
      </div>
    </div>

    <!-- YouTube -->
    <div class="embed-form visible" id="form-youtube">
      <label>YouTube URL or video ID</label>
      <input type="url" id="yt-url" placeholder="https://youtube.com/watch?v=dQw4w9WgXcQ" />
      <div class="info-box">Placed as a live, playable video card directly on your Miro board.</div>
      <div class="spacer"></div>
      <button class="btn btn-teal btn-full" id="btn-yt-embed">Embed video on board</button>
    </div>

    <!-- GeoGebra -->
    <div class="embed-form" id="form-geogebra">
      <label>Your GeoGebra applets (click to embed)</label>
      <div class="board-filter" id="ggb-board-filter">
        <span class="board-chip active" data-board="all">All</span>
        <span class="board-chip" data-board="AQA">AQA</span>
        <span class="board-chip" data-board="Edexcel">Edexcel</span>
        <span class="board-chip" data-board="OCR">OCR</span>
      </div>
      <input type="text" id="ggb-search" placeholder="Search applets... (e.g. SHM, waves, capacitor)" style="margin-bottom:6px;" />
      <div class="geogebra-grid" id="ggb-list">
        <!-- Populated by JS -->
      </div>
      <div class="spacer"></div>
      <label>Or paste a GeoGebra URL / material ID</label>
      <input type="text" id="ggb-id" placeholder="e.g. https://www.geogebra.org/m/abcdef12 or abcdef12" />
      <div class="info-box">Embedded as an interactive applet on your board. Students can manipulate it live.</div>
      <div class="spacer"></div>
      <button class="btn btn-teal btn-full" id="btn-ggb-embed">Embed applet on board</button>
    </div>

    <!-- PhET -->
    <div class="embed-form" id="form-phet">
      <label>Physics simulations (click to embed)</label>
      <div class="phet-grid" id="phet-list">
        <!-- Populated by JS -->
      </div>
      <div class="spacer"></div>
      <label>Or paste a PhET sim name</label>
      <input type="text" id="phet-slug" placeholder="e.g. projectile-motion" />
      <div class="info-box">Embedded as a fully interactive simulation on your board.</div>
      <div class="spacer"></div>
      <button class="btn btn-teal btn-full" id="btn-phet-embed">Embed simulation on board</button>
    </div>

    <!-- Isaac Physics -->
    <div class="embed-form" id="form-isaac">
      <label>Isaac Physics question / concept</label>
      <input type="url" id="isaac-url" placeholder="https://isaacphysics.org/questions/..." />
      <div class="warn-box">
        Isaac Physics blocks embedding in other sites. Clicking below places a <strong>clickable card</strong> on your board â€” students click it to open Isaac in a new tab.
      </div>
      <div class="spacer"></div>
      <label>Card label (optional)</label>
      <input type="text" id="isaac-label" placeholder="e.g. Projectile motion â€“ Q3" />
      <div class="spacer"></div>
      <button class="btn btn-yellow btn-full" id="btn-isaac-card">Place Isaac Physics card</button>
    </div>

    <!-- External Sims -->
    <div class="embed-form" id="form-external">
      <label>External simulations (click to open)</label>
      <div class="board-filter" id="ext-board-filter">
        <span class="board-chip active" data-board="all">All</span>
        <span class="board-chip" data-board="AQA">AQA</span>
        <span class="board-chip" data-board="Edexcel">Edexcel</span>
        <span class="board-chip" data-board="OCR">OCR</span>
      </div>
      <input type="text" id="ext-search" placeholder="Search sims... (e.g. drift velocity, cyclotron, decay)" style="margin-bottom:6px;" />
      <div class="ext-grid" id="ext-list">
        <!-- Populated by JS -->
      </div>
      <div class="info-box" style="margin-top:8px">
        External sims open in a new browser tab. Sources include iwant2study, Falstad, Walter Fendt, oPhysics, and PhysicsTJC.
      </div>
    </div>

  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 4: Circuit Diagrams
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page-circuits">
  <div class="scroll">
    <label>Circuit Components</label>
    <p style="color:var(--muted);font-size:11px;margin-bottom:8px">
      Click a component to place it on the board. Use Miro's line tool or the wire button below to connect them.
    </p>
    <input type="text" id="circuit-search" placeholder="Search components..." style="margin-bottom:6px;font-family:-apple-system,sans-serif;font-size:12px" />
    <div id="circuit-grid" class="circuit-grid">
      <!-- Populated by JS -->
    </div>

    <div class="spacer"></div>
    <label>Wire tool</label>
    <div class="info-box">
      Select two components on the board (Shift+click), then click Connect.
    </div>
    <div class="spacer"></div>
    <button class="btn btn-teal btn-full" id="btn-connect-wire">
      Connect selected components
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 5: Tools
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page-tools">
  <div class="scroll">
    <label>Reveal Covers</label>
    <p style="color:var(--muted);font-size:11px;margin-bottom:8px">
      Place a cover over content on your board. Remove it during the lesson to reveal what's underneath.
    </p>

    <label>Cover label</label>
    <input type="text" id="reveal-label" placeholder="? Reveal" style="font-family:-apple-system,sans-serif;font-size:13px" />

    <label style="margin-top:8px">Cover colour</label>
    <div class="colour-row" id="reveal-colour-row">
      <div class="colour-swatch selected" style="background:#7C3AED" data-reveal-colour="#7C3AED" title="PP Purple"></div>
      <div class="colour-swatch" style="background:#a78bfa" data-reveal-colour="#a78bfa" title="Lavender"></div>
      <div class="colour-swatch" style="background:#5eead4" data-reveal-colour="#5eead4" title="Teal"></div>
      <div class="colour-swatch" style="background:#fbbf24" data-reveal-colour="#fbbf24" title="Yellow"></div>
      <div class="colour-swatch" style="background:#343a40" data-reveal-colour="#343a40" title="Dark"></div>
      <input type="color" id="reveal-custom-colour" value="#7C3AED" title="Custom colour" />
    </div>

    <label style="margin-top:8px">Size</label>
    <div class="row" style="gap:4px;margin-bottom:8px">
      <button class="btn btn-ghost btn-sm reveal-size active" data-w="200" data-h="80">Small</button>
      <button class="btn btn-ghost btn-sm reveal-size" data-w="400" data-h="150">Medium</button>
      <button class="btn btn-ghost btn-sm reveal-size" data-w="600" data-h="300">Large</button>
    </div>

    <button class="btn btn-primary btn-full" id="btn-create-reveal">
      Place cover on board
    </button>

    <div class="spacer"></div>
    <hr style="border-color:var(--border)">
    <div class="spacer"></div>

    <label>Remove covers</label>
    <p style="color:var(--muted);font-size:11px;margin-bottom:8px">
      Select a cover on the board, then click Reveal. Or remove all covers at once.
    </p>
    <div class="row" style="gap:6px">
      <button class="btn btn-teal" id="btn-reveal-selected" style="flex:1">
        Reveal selected
      </button>
      <button class="btn btn-ghost" id="btn-reveal-all" style="flex:1">
        Reveal all
      </button>
    </div>

    <div class="spacer"></div>
    <div id="reveal-count" style="color:var(--muted);font-size:11px;text-align:center"></div>
  </div>
</div>

<!-- Toast -->
<div id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const PHYSICS_LIBRARY = [
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 1. FUNDAMENTAL CONSTANTS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Fundamental Constants',
    equations: [
      { name: 'speed of light',                latex: 'c = 3.00 \\times 10^8\\;\\text{m s}^{-1}',                                       boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'permittivity of free space',    latex: '\\varepsilon_0 = 8.85 \\times 10^{-12}\\;\\text{F m}^{-1}',                      boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'Coulomb constant',              latex: '\\dfrac{1}{4\\pi\\varepsilon_0} = 8.99 \\times 10^9\\;\\text{N m}^2\\text{ C}^{-2}', boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'electron charge',               latex: 'e = 1.60 \\times 10^{-19}\\;\\text{C}',                                          boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'Planck constant',               latex: 'h = 6.63 \\times 10^{-34}\\;\\text{J s}',                                        boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'gravitational constant',        latex: 'G = 6.67 \\times 10^{-11}\\;\\text{N m}^2\\text{ kg}^{-2}',                      boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'Avogadro constant',             latex: 'N_A = 6.02 \\times 10^{23}\\;\\text{mol}^{-1}',                                  boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'molar gas constant',            latex: 'R = 8.31\\;\\text{J mol}^{-1}\\text{ K}^{-1}',                                   boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'Boltzmann constant',            latex: 'k = 1.38 \\times 10^{-23}\\;\\text{J K}^{-1}',                                   boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'Stefan constant',               latex: '\\sigma = 5.67 \\times 10^{-8}\\;\\text{W m}^{-2}\\text{ K}^{-4}',               boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'permeability of free space',    latex: '\\mu_0 = 4\\pi \\times 10^{-7}\\;\\text{H m}^{-1}',                              boards: 'AQA OCR',         sheet: true },
      { name: 'electron mass',                 latex: 'm_e = 9.11 \\times 10^{-31}\\;\\text{kg}',                                       boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'proton mass',                   latex: 'm_p = 1.67(3) \\times 10^{-27}\\;\\text{kg}',                                    boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'neutron mass',                  latex: 'm_n = 1.67(5) \\times 10^{-27}\\;\\text{kg}',                                    boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'atomic mass unit',              latex: 'u = 1.661 \\times 10^{-27}\\;\\text{kg} = 931.5\\;\\text{MeV}',                  boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'g on Earth',                    latex: 'g = 9.81\\;\\text{m s}^{-2}',                                                    boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 2. PHOTONS & ENERGY LEVELS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Photons & Energy Levels',
    equations: [
      // E=hf: NOT on AQA data booklet (must know); IS on Edexcel and OCR data booklets
      { name: 'photon energy',               latex: 'E = hf',                                                   boards: 'AQA Edexcel OCR', sheet: true },
      // E=hc/lambda: NOT on AQA data booklet; IS on OCR (as E=hf=hc/lambda) and Edexcel
      { name: 'photon energy (wavelength)',   latex: 'E = \\dfrac{hc}{\\lambda}',                               boards: 'AQA Edexcel OCR', sheet: true },
      // Photoelectric: on all three data booklets
      { name: 'photoelectric equation',       latex: 'hf = \\phi + E_{k(\\max)}',                               boards: 'AQA Edexcel OCR', sheet: true },
      // de Broglie: on all three data booklets
      { name: 'de Broglie wavelength',        latex: '\\lambda = \\dfrac{h}{mv}',                               boards: 'AQA OCR',         sheet: true },
      // Edexcel writes de Broglie as lambda=h/p
      { name: 'de Broglie wavelength (momentum)',  latex: '\\lambda = \\dfrac{h}{p}',                           boards: 'Edexcel',          sheet: true },
      // Energy level transition: on AQA and OCR data booklets
      { name: 'energy level transition',      latex: 'hf = E_1 - E_2',                                         boards: 'AQA OCR',          sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 3. PROGRESSIVE WAVES
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Progressive Waves',
    equations: [
      // v=f*lambda: NOT on AQA data booklet (must know); IS on Edexcel and OCR data booklets
      { name: 'wave speed',                  latex: 'v = f\\lambda',                                             boards: 'AQA Edexcel OCR', sheet: true },
      // f=1/T: NOT on AQA data booklet; IS on OCR data booklet
      { name: 'period',                      latex: 'f = \\dfrac{1}{T}',                                        boards: 'AQA Edexcel OCR', sheet: true },
      // Intensity: NOT on AQA data booklet; IS on OCR and Edexcel data booklets
      { name: 'intensity',                   latex: 'I = \\dfrac{P}{A}',                                        boards: 'AQA Edexcel OCR', sheet: true },
      // Vector components: OCR Module 2 data booklet only
      { name: 'horizontal component',        latex: 'F_x = F\\cos\\theta',                                      boards: 'OCR',              sheet: true },
      { name: 'vertical component',          latex: 'F_y = F\\sin\\theta',                                      boards: 'OCR',              sheet: true },
      // Wave on a string: Edexcel only
      { name: 'wave speed on string',        latex: 'v = \\sqrt{\\dfrac{T}{\\mu}}',                             boards: 'Edexcel',          sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 4. REFRACTION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Refraction',
    equations: [
      // n=c/v: NOT on AQA data booklet (must know); IS on OCR and Edexcel data booklets
      { name: 'refractive index',            latex: 'n = \\dfrac{c}{v}',                                        boards: 'AQA Edexcel OCR', sheet: true },
      // Snell's law: NOT on AQA data booklet; IS on OCR and Edexcel
      { name: "Snell's law",                 latex: 'n_1 \\sin\\theta_1 = n_2 \\sin\\theta_2',                  boards: 'AQA Edexcel OCR', sheet: true },
      // Critical angle: NOT on AQA data booklet; IS on OCR and Edexcel
      { name: 'critical angle',              latex: '\\sin\\theta_c = \\dfrac{1}{n}',                           boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 5. INTERFERENCE & DIFFRACTION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Interference & Diffraction',
    equations: [
      // Diffraction grating: on all three data booklets
      { name: 'diffraction grating',         latex: 'd\\sin\\theta = n\\lambda',                                 boards: 'AQA Edexcel OCR', sheet: true },
      // Double slit: AQA uses w=lambdaD/s; OCR uses lambda=ax/D
      { name: 'double slit (AQA)',           latex: 'w = \\dfrac{\\lambda D}{s}',                                boards: 'AQA',             sheet: true },
      { name: 'double slit (OCR)',           latex: '\\lambda = \\dfrac{ax}{D}',                                 boards: 'OCR',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 6. KINEMATICS (SUVAT)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Kinematics (SUVAT)',
    equations: [
      // All 4 SUVAT equations are on all three data booklets
      { name: 'v = u + at',                  latex: 'v = u + at',                                                boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'v\\u00B2 = u\\u00B2 + 2as',  latex: 'v^2 = u^2 + 2as',                                          boards: 'AQA Edexcel OCR', sheet: true },
      { name: 's = ut + \\u00BDat\\u00B2',   latex: 's = ut + \\tfrac{1}{2}at^2',                               boards: 'AQA Edexcel OCR', sheet: true },
      { name: 's = \\u00BD(u+v)t',           latex: 's = \\tfrac{1}{2}(u + v)t',                                boards: 'AQA Edexcel OCR', sheet: true },
      // 5th SUVAT: on AQA data booklet; not separately listed by Edexcel/OCR (derived)
      { name: 's = vt - \\u00BDat\\u00B2',   latex: 's = vt - \\tfrac{1}{2}at^2',                               boards: 'AQA',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 7. FORCES & MOMENTUM
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Forces & Momentum',
    equations: [
      // F=ma: NOT on AQA data booklet (must know); Edexcel has SigmaF=ma on data booklet; OCR derives from F=Dp/Dt
      { name: 'Newton\'s second law',         latex: 'F = ma',                                                   boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel explicitly writes SigmaF=ma on data booklet
      { name: 'net force (Edexcel)',          latex: '\\Sigma F = ma',                                           boards: 'Edexcel',          sheet: true },
      // Weight: NOT on AQA data booklet; on Edexcel data booklet (W=mg); OCR implicit
      { name: 'weight',                       latex: 'W = mg',                                                   boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel writes g=F/m on data booklet
      { name: 'gravitational field strength (surface)', latex: 'g = \\dfrac{F}{m}',                              boards: 'Edexcel OCR',      sheet: true },
      // Momentum: NOT on AQA data booklet; on Edexcel and OCR data booklets
      { name: 'momentum',                     latex: 'p = mv',                                                   boards: 'AQA Edexcel OCR', sheet: true },
      // Force as rate of change of momentum: on AQA data booklet; OCR data booklet
      { name: 'force (rate of change of momentum, AQA)', latex: 'F = \\dfrac{\\Delta(mv)}{\\Delta t}',           boards: 'AQA',             sheet: true },
      { name: 'force (rate of change of momentum, OCR)', latex: 'F = \\dfrac{\\Delta p}{\\Delta t}',             boards: 'OCR',             sheet: true },
      // Impulse: on AQA data booklet; Edexcel writes F*Delta(t)=Delta(p)
      { name: 'impulse (AQA)',                latex: 'F\\,\\Delta t = \\Delta(mv)',                              boards: 'AQA',             sheet: true },
      { name: 'impulse (Edexcel)',            latex: 'F\\,\\Delta t = \\Delta p',                                boards: 'Edexcel',          sheet: true },
      // Moment: on AQA data booklet as moment=Fd; OCR has moment=Fx and torque=Fd
      { name: 'moment of a force',            latex: '\\text{moment} = Fd',                                     boards: 'AQA Edexcel OCR', sheet: true },
      // OCR torque of a couple: on OCR data booklet
      { name: 'torque of a couple',           latex: '\\tau = Fd',                                               boards: 'OCR',             sheet: true },
      // Edexcel KE from momentum: on Edexcel data booklet
      { name: 'kinetic energy (momentum)',    latex: 'E_k = \\dfrac{p^2}{2m}',                                  boards: 'Edexcel',          sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 8. ENERGY & POWER
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Energy & Power',
    equations: [
      // Work done: on AQA data booklet; Edexcel writes Delta(W)=F*Delta(s)
      { name: 'work done (AQA/OCR)',          latex: 'W = Fs\\cos\\theta',                                      boards: 'AQA OCR',         sheet: true },
      { name: 'work done (Edexcel)',          latex: '\\Delta W = F\\,\\Delta s',                                boards: 'Edexcel',          sheet: true },
      // KE: NOT on AQA data booklet (must know); on Edexcel and OCR data booklets
      { name: 'kinetic energy',               latex: 'E_k = \\tfrac{1}{2}mv^2',                                 boards: 'AQA Edexcel OCR', sheet: true },
      // GPE: NOT on AQA data booklet (must know); on Edexcel and OCR data booklets
      { name: 'gravitational PE',             latex: '\\Delta E_p = mg\\Delta h',                                boards: 'AQA Edexcel OCR', sheet: true },
      // Power: on AQA data booklet; on Edexcel (as P=E/t=W/t) and OCR
      { name: 'power',                        latex: 'P = \\dfrac{\\Delta W}{\\Delta t}',                       boards: 'AQA OCR',         sheet: true },
      { name: 'power (Edexcel)',              latex: 'P = \\dfrac{E}{t} = \\dfrac{W}{t}',                       boards: 'Edexcel',          sheet: true },
      // P=Fv: on AQA, OCR, and Edexcel data booklets
      { name: 'power (force \\u00D7 velocity)', latex: 'P = Fv',                                                boards: 'AQA Edexcel OCR', sheet: true },
      // Efficiency: NOT on AQA data booklet; on Edexcel and OCR data booklets
      { name: 'efficiency',                   latex: '\\text{efficiency} = \\dfrac{\\text{useful output}}{\\text{total input}}', boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 9. MATERIALS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Materials',
    equations: [
      // Density: NOT on AQA data booklet (must know); on OCR and Edexcel data booklets
      { name: 'density',                      latex: '\\rho = \\dfrac{m}{V}',                                   boards: 'AQA Edexcel OCR', sheet: true },
      // Pressure: OCR has p=F/A and hydrostatic p=h*rho*g on data booklet; Edexcel not explicit
      { name: 'pressure',                     latex: 'p = \\dfrac{F}{A}',                                       boards: 'OCR',             sheet: true },
      { name: 'hydrostatic pressure',         latex: 'p = h\\rho g',                                            boards: 'OCR',             sheet: true },
      // Hooke's law: on AQA data booklet; on OCR (F=kx); on Edexcel (Delta(F)=k*Delta(x))
      { name: 'Hooke\'s law (AQA)',           latex: 'F = k\\,\\Delta L',                                       boards: 'AQA',             sheet: true },
      { name: 'Hooke\'s law (OCR)',           latex: 'F = kx',                                                  boards: 'OCR',             sheet: true },
      { name: 'Hooke\'s law (Edexcel)',       latex: '\\Delta F = k\\,\\Delta x',                               boards: 'Edexcel',          sheet: true },
      // Young modulus: on all three data booklets
      { name: 'Young modulus',                latex: 'E = \\dfrac{\\sigma}{\\varepsilon}',                      boards: 'AQA Edexcel OCR', sheet: true },
      // Stress: on all three data booklets
      { name: 'stress',                       latex: '\\sigma = \\dfrac{F}{A}',                                 boards: 'AQA Edexcel OCR', sheet: true },
      // Strain: on all three data booklets (AQA uses DeltaL/L; OCR uses x/L; Edexcel uses Deltax/x)
      { name: 'strain (AQA)',                 latex: '\\varepsilon = \\dfrac{\\Delta L}{L}',                    boards: 'AQA',             sheet: true },
      { name: 'strain (OCR)',                 latex: '\\varepsilon = \\dfrac{x}{L}',                            boards: 'OCR',             sheet: true },
      { name: 'strain (Edexcel)',             latex: '\\varepsilon = \\dfrac{\\Delta x}{x}',                    boards: 'Edexcel',          sheet: true },
      // Elastic strain energy: on all three data booklets
      { name: 'elastic strain energy',        latex: 'E = \\tfrac{1}{2}F\\,\\Delta L = \\tfrac{1}{2}k\\,(\\Delta L)^2', boards: 'AQA',     sheet: true },
      { name: 'elastic strain energy (OCR)',  latex: 'E = \\tfrac{1}{2}Fx = \\tfrac{1}{2}kx^2',                boards: 'OCR',             sheet: true },
      { name: 'elastic strain energy (Edexcel)', latex: '\\Delta E_{el} = \\tfrac{1}{2}F\\,\\Delta x',         boards: 'Edexcel',          sheet: true },
      // Stokes' law: Edexcel only
      { name: 'Stokes\' law',                 latex: 'F = 6\\pi\\eta r v',                                     boards: 'Edexcel',          sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 10. CURRENT & CHARGE
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Current & Charge',
    equations: [
      // Charge: on AQA and OCR data booklets; Edexcel writes I=DeltaQ/Deltat
      { name: 'charge (AQA/OCR)',             latex: '\\Delta Q = I\\,\\Delta t',                                boards: 'AQA OCR',         sheet: true },
      { name: 'current (Edexcel)',            latex: 'I = \\dfrac{\\Delta Q}{\\Delta t}',                       boards: 'Edexcel',          sheet: true },
      // Drift velocity: on OCR and Edexcel data booklets; NOT on AQA
      { name: 'drift velocity (OCR)',         latex: 'I = Anev',                                                boards: 'OCR',             sheet: true },
      { name: 'drift velocity (Edexcel)',     latex: 'I = nqvA',                                                boards: 'Edexcel',          sheet: true },
      // Potential difference: NOT on AQA data booklet (must know); on OCR (W=VQ); on Edexcel (V=W/Q)
      { name: 'potential difference',         latex: 'V = \\dfrac{W}{Q}',                                      boards: 'AQA Edexcel OCR', sheet: true },
      // Ohm's law: NOT on AQA data booklet; on Edexcel (R=V/I); implicit in all boards
      { name: 'Ohm\'s law',                   latex: 'V = IR',                                                  boards: 'AQA Edexcel OCR', sheet: true },
      // Resistivity: on AQA, OCR, and Edexcel data booklets
      { name: 'resistivity',                  latex: 'R = \\dfrac{\\rho L}{A}',                                 boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 11. POWER & ENERGY (ELECTRICAL)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Power & Energy (Electrical)',
    equations: [
      // Electrical power: NOT on AQA data booklet (must know); on Edexcel and OCR data booklets
      { name: 'electrical power',             latex: 'P = IV = I^2 R = \\dfrac{V^2}{R}',                        boards: 'AQA Edexcel OCR', sheet: true },
      // Energy transferred: on AQA data booklet; on Edexcel and OCR data booklets
      { name: 'energy transferred',           latex: 'W = VIt',                                                 boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 12. CIRCUIT RULES
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Circuit Rules',
    equations: [
      // EMF: on all three data booklets
      { name: 'EMF equation',                 latex: '\\varepsilon = I(R + r)',                                  boards: 'AQA Edexcel OCR', sheet: true },
      // Terminal PD: on AQA and OCR data booklets
      { name: 'terminal PD',                  latex: '\\varepsilon = V + Ir',                                   boards: 'AQA OCR',         sheet: true },
      // Resistors in series: on AQA and OCR data booklets; on Edexcel (implicit)
      { name: 'resistors in series',          latex: 'R_T = R_1 + R_2 + R_3 + \\cdots',                        boards: 'AQA Edexcel OCR', sheet: true },
      // Resistors in parallel: on AQA and OCR data booklets; on Edexcel (implicit)
      { name: 'resistors in parallel',        latex: '\\dfrac{1}{R_T} = \\dfrac{1}{R_1} + \\dfrac{1}{R_2} + \\dfrac{1}{R_3} + \\cdots', boards: 'AQA Edexcel OCR', sheet: true },
      // Potential divider: on AQA data booklet; on OCR with two forms
      { name: 'potential divider',            latex: 'V_{\\text{out}} = \\dfrac{R_2}{R_1 + R_2}\\,V_{\\text{in}}', boards: 'AQA Edexcel OCR', sheet: true },
      // OCR alternative potential divider form
      { name: 'potential divider (ratio, OCR)', latex: '\\dfrac{V_1}{V_2} = \\dfrac{R_1}{R_2}',                boards: 'OCR',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 13. CIRCULAR MOTION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Circular Motion',
    equations: [
      // Angular speed: on all three data booklets
      { name: 'angular speed',                latex: '\\omega = \\dfrac{2\\pi}{T} = 2\\pi f',                   boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel writes T=2pi/omega separately
      { name: 'period from angular speed',    latex: 'T = \\dfrac{2\\pi}{\\omega}',                             boards: 'Edexcel',          sheet: true },
      // Linear speed: on all three data booklets
      { name: 'linear speed',                 latex: 'v = \\omega r',                                           boards: 'AQA Edexcel OCR', sheet: true },
      // Centripetal acceleration: on all three data booklets
      { name: 'centripetal acceleration',      latex: 'a = \\dfrac{v^2}{r} = \\omega^2 r',                     boards: 'AQA Edexcel OCR', sheet: true },
      // Centripetal force: on all three data booklets
      { name: 'centripetal force',             latex: 'F = \\dfrac{mv^2}{r} = m\\omega^2 r',                   boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 14. SIMPLE HARMONIC MOTION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Simple Harmonic Motion',
    equations: [
      // SHM defining equation: on all three data booklets
      { name: 'SHM condition',                latex: 'a = -\\omega^2 x',                                        boards: 'AQA Edexcel OCR', sheet: true },
      // SHM restoring force: on Edexcel data booklet
      { name: 'SHM restoring force',          latex: 'F = -kx',                                                 boards: 'Edexcel',          sheet: true },
      // Displacement: cos form on all three; OCR also gives sin form
      { name: 'displacement (cos)',            latex: 'x = A\\cos(\\omega t)',                                   boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'displacement (sin, OCR)',       latex: 'x = A\\sin(\\omega t)',                                   boards: 'OCR',             sheet: true },
      // Velocity: Edexcel gives explicit v = -Aw sin(wt); AQA/OCR give v = +/-w*sqrt(A^2-x^2)
      { name: 'velocity (Edexcel)',            latex: 'v = -A\\omega\\sin(\\omega t)',                           boards: 'Edexcel',          sheet: true },
      { name: 'velocity',                      latex: 'v = \\pm\\omega\\sqrt{A^2 - x^2}',                      boards: 'AQA OCR',         sheet: true },
      // Acceleration: Edexcel gives explicit a = -Aw^2 cos(wt)
      { name: 'acceleration (Edexcel)',        latex: 'a = -A\\omega^2\\cos(\\omega t)',                         boards: 'Edexcel',          sheet: true },
      // Maximum velocity
      { name: 'maximum velocity',              latex: 'v_{\\max} = \\omega A',                                  boards: 'AQA Edexcel OCR', sheet: false },
      // Period (mass-spring): on all three data booklets
      { name: 'period (mass-spring)',          latex: 'T = 2\\pi\\sqrt{\\dfrac{m}{k}}',                         boards: 'AQA Edexcel OCR', sheet: true },
      // Period (pendulum): on all three data booklets
      { name: 'period (pendulum)',             latex: 'T = 2\\pi\\sqrt{\\dfrac{l}{g}}',                         boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel also writes omega=2pi*f and T=1/f=2pi/omega
      { name: 'SHM angular frequency',        latex: '\\omega = 2\\pi f',                                       boards: 'Edexcel',          sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 15. THERMAL PHYSICS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Thermal Physics',
    equations: [
      // Specific heat capacity: on all three data booklets (OCR/Edexcel use E instead of Q)
      { name: 'specific heat capacity (AQA)',  latex: 'Q = mc\\,\\Delta\\theta',                                boards: 'AQA',             sheet: true },
      { name: 'specific heat capacity (OCR/Edexcel)', latex: 'E = mc\\,\\Delta\\theta',                         boards: 'Edexcel OCR',     sheet: true },
      // Specific latent heat: on all three data booklets
      { name: 'specific latent heat (AQA)',    latex: 'Q = mL',                                                 boards: 'AQA',             sheet: true },
      { name: 'specific latent heat (OCR/Edexcel)', latex: 'E = mL',                                            boards: 'Edexcel OCR',     sheet: true },
      // Ideal gas law: on all three data booklets
      { name: 'ideal gas law (moles)',         latex: 'pV = nRT',                                               boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'ideal gas law (molecules)',     latex: 'pV = NkT',                                               boards: 'AQA Edexcel OCR', sheet: true },
      // Kinetic theory: on all three data booklets
      { name: 'mean KE of molecule',           latex: '\\tfrac{1}{2}m\\langle c^2\\rangle = \\tfrac{3}{2}kT',  boards: 'AQA Edexcel OCR', sheet: true },
      // OCR also writes E = 3/2 kT as standalone
      { name: 'thermal energy per molecule (OCR)', latex: 'E = \\tfrac{3}{2}kT',                                boards: 'OCR',             sheet: true },
      // Gas pressure equation: on all three data booklets
      { name: 'gas pressure',                  latex: 'pV = \\tfrac{1}{3}Nm\\langle c^2\\rangle',              boards: 'AQA Edexcel OCR', sheet: true },
      // First law of thermodynamics
      { name: 'first law of thermodynamics',   latex: '\\Delta U = Q - W',                                     boards: 'AQA',             sheet: false },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 16. GRAVITATIONAL FIELDS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Gravitational Fields',
    equations: [
      // Newton's law of gravitation: on all three data booklets
      { name: 'Newton\'s law of gravitation',  latex: 'F = \\dfrac{Gm_1 m_2}{r^2}',                            boards: 'AQA Edexcel OCR', sheet: true },
      // OCR has negative sign: F = -GMm/r^2
      { name: 'gravitational force (OCR, with sign)', latex: 'F = -\\dfrac{GMm}{r^2}',                         boards: 'OCR',             sheet: true },
      // Field strength: on all three data booklets
      { name: 'gravitational field strength',  latex: 'g = \\dfrac{GM}{r^2}',                                  boards: 'AQA Edexcel OCR', sheet: true },
      // OCR has negative sign
      { name: 'gravitational field strength (OCR, with sign)', latex: 'g = -\\dfrac{GM}{r^2}',                  boards: 'OCR',             sheet: true },
      // Gravitational potential: on all three data booklets
      { name: 'gravitational potential',       latex: 'V_g = -\\dfrac{GM}{r}',                                  boards: 'AQA Edexcel OCR', sheet: true },
      // Gravitational PE: on OCR data booklet explicitly
      { name: 'gravitational PE (field)',      latex: 'E = -\\dfrac{GMm}{r}',                                   boards: 'OCR',             sheet: true },
      // Orbital period: on AQA and OCR data booklets
      { name: 'orbital period',                latex: 'T^2 = \\dfrac{4\\pi^2 r^3}{GM}',                        boards: 'AQA OCR',         sheet: true },
      // Orbital/escape velocities: on AQA data booklet
      { name: 'orbital speed',                 latex: 'v = \\sqrt{\\dfrac{GM}{r}}',                             boards: 'AQA',             sheet: true },
      { name: 'escape velocity',               latex: 'v_{\\text{esc}} = \\sqrt{\\dfrac{2GM}{r}}',             boards: 'AQA',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 17. ELECTRIC FIELDS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Electric Fields',
    equations: [
      // Coulomb's law: on all three data booklets
      { name: 'Coulomb\'s law',                latex: 'F = \\dfrac{1}{4\\pi\\varepsilon_0}\\dfrac{Q_1 Q_2}{r^2}', boards: 'AQA Edexcel OCR', sheet: true },
      // Field strength (definition): on all three data booklets
      { name: 'electric field strength',       latex: 'E = \\dfrac{F}{Q}',                                     boards: 'AQA Edexcel OCR', sheet: true },
      // Radial field strength: on all three data booklets
      { name: 'electric field (radial)',       latex: 'E = \\dfrac{1}{4\\pi\\varepsilon_0}\\dfrac{Q}{r^2}',    boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel also writes using k
      { name: 'electric field (radial, Edexcel)', latex: 'E = \\dfrac{kQ}{r^2}',                               boards: 'Edexcel',          sheet: true },
      // Uniform field: on all three data booklets
      { name: 'electric field (uniform)',      latex: 'E = \\dfrac{V}{d}',                                     boards: 'AQA Edexcel OCR', sheet: true },
      // Electric potential: on all three data booklets
      { name: 'electric potential',            latex: 'V = \\dfrac{1}{4\\pi\\varepsilon_0}\\dfrac{Q}{r}',      boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel also writes using k
      { name: 'electric potential (Edexcel)',  latex: 'V = \\dfrac{kQ}{r}',                                    boards: 'Edexcel',          sheet: true },
      // Work done in electric field: on AQA and OCR data booklets
      { name: 'work done (electric field)',    latex: 'W = QV',                                                 boards: 'AQA Edexcel OCR', sheet: true },
      // Electric PE (OCR): on OCR data booklet
      { name: 'electric PE (OCR)',             latex: 'E = \\dfrac{Qq}{4\\pi\\varepsilon_0 r}',                boards: 'OCR',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 18. CAPACITANCE
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Capacitance',
    equations: [
      // Capacitance: on all three data booklets
      { name: 'capacitance',                   latex: 'C = \\dfrac{Q}{V}',                                     boards: 'AQA Edexcel OCR', sheet: true },
      // Parallel plate: on AQA data booklet (with epsilon_r); OCR writes without epsilon_r
      { name: 'parallel plate capacitor (AQA)', latex: 'C = \\dfrac{\\varepsilon_0 \\varepsilon_r A}{d}',      boards: 'AQA',             sheet: true },
      { name: 'parallel plate capacitor (OCR)', latex: 'C = \\dfrac{\\varepsilon_0 A}{d}',                     boards: 'OCR',             sheet: true },
      // Spherical capacitor: OCR only
      { name: 'spherical capacitor (OCR)',     latex: 'C = 4\\pi\\varepsilon_0 R',                              boards: 'OCR',             sheet: true },
      // Energy stored: on all three data booklets
      { name: 'energy stored',                 latex: 'E = \\tfrac{1}{2}QV = \\tfrac{1}{2}CV^2 = \\dfrac{Q^2}{2C}', boards: 'AQA Edexcel OCR', sheet: true },
      // Capacitors in parallel: on AQA and OCR data booklets
      { name: 'capacitors in parallel',        latex: 'C_T = C_1 + C_2 + C_3',                                 boards: 'AQA Edexcel OCR', sheet: true },
      // Capacitors in series: on AQA and OCR data booklets
      { name: 'capacitors in series',          latex: '\\dfrac{1}{C_T} = \\dfrac{1}{C_1} + \\dfrac{1}{C_2} + \\dfrac{1}{C_3}', boards: 'AQA Edexcel OCR', sheet: true },
      // Discharge: on all three data booklets
      { name: 'capacitor discharge (charge)',  latex: 'Q = Q_0\\,e^{-t/RC}',                                   boards: 'AQA Edexcel OCR', sheet: true },
      // Edexcel also gives log form for discharge
      { name: 'capacitor discharge (log form, Edexcel)', latex: '\\ln Q = \\ln Q_0 - \\dfrac{t}{RC}',          boards: 'Edexcel',          sheet: true },
      // Edexcel also gives V and I discharge forms
      { name: 'capacitor discharge (voltage)', latex: 'V = V_0\\,e^{-t/RC}',                                   boards: 'Edexcel OCR',     sheet: true },
      { name: 'capacitor discharge (current)', latex: 'I = I_0\\,e^{-t/RC}',                                   boards: 'Edexcel OCR',     sheet: true },
      // OCR charging capacitor: on OCR data booklet
      { name: 'capacitor charging (OCR)',      latex: 'x = x_0\\left(1 - e^{-t/CR}\\right)',                   boards: 'OCR',             sheet: true },
      // Time constant: on AQA and OCR data booklets
      { name: 'time constant',                 latex: '\\tau = RC',                                             boards: 'AQA Edexcel OCR', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 19. MAGNETIC FIELDS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Magnetic Fields',
    equations: [
      // Force on wire: on all three data booklets
      { name: 'force on current-carrying wire', latex: 'F = BIl\\sin\\theta',                                  boards: 'AQA Edexcel OCR', sheet: true },
      // Force on charge: on all three data booklets (OCR omits sin theta)
      { name: 'force on moving charge',        latex: 'F = BQv\\sin\\theta',                                   boards: 'AQA Edexcel',     sheet: true },
      { name: 'force on moving charge (OCR)',  latex: 'F = BQv',                                               boards: 'OCR',             sheet: true },
      // Magnetic flux: on all three data booklets
      { name: 'magnetic flux',                 latex: '\\Phi = BA\\cos\\theta',                                 boards: 'AQA Edexcel OCR', sheet: true },
      // Faraday's law: on all three data booklets
      { name: 'Faraday\'s law',                latex: '\\varepsilon = -N\\dfrac{\\Delta\\Phi}{\\Delta t}',     boards: 'AQA OCR',         sheet: true },
      // Edexcel writes Faraday's law as epsilon = -d(NPhi)/dt
      { name: 'Faraday\'s law (Edexcel)',      latex: '\\varepsilon = -\\dfrac{d(N\\Phi)}{dt}',                boards: 'Edexcel',          sheet: true },
      // Transformer: on all three data booklets
      { name: 'transformer ratio',             latex: '\\dfrac{N_s}{N_p} = \\dfrac{V_s}{V_p}',                boards: 'AQA Edexcel OCR', sheet: true },
      // OCR also gives current ratio in transformer
      { name: 'transformer (current, OCR)',    latex: '\\dfrac{N_s}{N_p} = \\dfrac{V_s}{V_p} = \\dfrac{I_p}{I_s}', boards: 'OCR',        sheet: true },
      // RMS values: on AQA and Edexcel data booklets
      { name: 'RMS voltage',                   latex: 'V_{\\text{rms}} = \\dfrac{V_0}{\\sqrt{2}}',             boards: 'AQA Edexcel',     sheet: true },
      { name: 'RMS current',                   latex: 'I_{\\text{rms}} = \\dfrac{I_0}{\\sqrt{2}}',             boards: 'AQA Edexcel',     sheet: true },
      // Flux linkage: on AQA data booklet
      { name: 'flux linkage',                  latex: 'N\\Phi = BAN\\cos\\theta',                               boards: 'AQA',             sheet: true },
      // Edexcel: charged particle radius in magnetic field
      { name: 'radius of charged particle in B-field (Edexcel)', latex: 'r = \\dfrac{p}{BQ}',                  boards: 'Edexcel',          sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 20. NUCLEAR PHYSICS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Nuclear Physics',
    equations: [
      // Mass-energy: on all three data booklets
      { name: 'mass-energy equivalence',       latex: '\\Delta E = \\Delta m\\,c^2',                           boards: 'AQA Edexcel OCR', sheet: true },
      // Activity: on all three data booklets
      { name: 'activity',                      latex: 'A = \\lambda N',                                        boards: 'AQA Edexcel OCR', sheet: true },
      // Decay law: on all three data booklets
      { name: 'decay law (number)',            latex: 'N = N_0\\,e^{-\\lambda t}',                             boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'decay law (activity)',          latex: 'A = A_0\\,e^{-\\lambda t}',                             boards: 'AQA Edexcel OCR', sheet: true },
      // Half-life: on all three data booklets
      { name: 'half-life',                     latex: 't_{\\frac{1}{2}} = \\dfrac{\\ln 2}{\\lambda}',         boards: 'AQA Edexcel OCR', sheet: true },
      // Decay rate: on OCR and Edexcel data booklets
      { name: 'decay rate (OCR)',              latex: '\\dfrac{\\Delta N}{\\Delta t} = -\\lambda N',            boards: 'OCR',             sheet: true },
      { name: 'decay rate (Edexcel)',          latex: '\\dfrac{dN}{dt} = -\\lambda N',                         boards: 'Edexcel',          sheet: true },
      // Nuclear radius: on AQA and OCR data booklets
      { name: 'nuclear radius',                latex: 'R = R_0\\,A^{1/3}',                                    boards: 'AQA OCR',         sheet: true },
      // Inverse square law (gamma): AQA
      { name: 'inverse square law (gamma)',    latex: 'I = \\dfrac{k}{x^2}',                                  boards: 'AQA',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 21. ASTROPHYSICS & COSMOLOGY
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Astrophysics & Cosmology',
    equations: [
      // Stefan-Boltzmann law: on OCR and Edexcel data booklets; AQA option (on AQA data booklet too)
      { name: 'Stefan-Boltzmann law',          latex: 'L = 4\\pi r^2 \\sigma T^4',                            boards: 'AQA Edexcel OCR', sheet: true },
      { name: 'Stefan\'s law (power form)',    latex: 'P = \\sigma A T^4',                                    boards: 'AQA',             sheet: true },
      // Wien's displacement law: on OCR and Edexcel data booklets; AQA option
      { name: 'Wien\'s displacement law',      latex: '\\lambda_{\\max} T = 2.898 \\times 10^{-3}\\;\\text{m K}', boards: 'AQA Edexcel OCR', sheet: true },
      // OCR writes Wien as proportionality
      { name: 'Wien\'s law (OCR)',             latex: '\\lambda_{\\max} \\propto \\dfrac{1}{T}',               boards: 'OCR',             sheet: true },
      // Luminosity-intensity: on Edexcel data booklet; AQA option; OCR
      { name: 'inverse square law (luminosity)', latex: 'I = \\dfrac{L}{4\\pi d^2}',                          boards: 'AQA Edexcel OCR', sheet: true },
      // Doppler/red shift: on all three data booklets
      { name: 'Doppler / cosmological red shift', latex: '\\dfrac{\\Delta\\lambda}{\\lambda} = \\dfrac{\\Delta f}{f} \\approx \\dfrac{v}{c}', boards: 'AQA Edexcel OCR', sheet: true },
      // Hubble's law: on all three data booklets
      { name: 'Hubble\'s law',                 latex: 'v = H_0\\,d',                                          boards: 'AQA Edexcel OCR', sheet: true },
      // Cosmological age: OCR only
      { name: 'age of universe (OCR)',         latex: 't \\approx H_0^{-1}',                                   boards: 'OCR',             sheet: true },
      // Stellar parallax: OCR only
      { name: 'stellar parallax (OCR)',        latex: 'p = \\dfrac{1}{d}',                                    boards: 'OCR',             sheet: true },
      // AQA astrophysics option specifics
      { name: 'Rayleigh criterion',            latex: '\\theta \\approx \\dfrac{\\lambda}{D}',                boards: 'AQA',             sheet: true },
      { name: 'telescope magnification',       latex: 'M = \\dfrac{f_o}{f_e}',                                boards: 'AQA',             sheet: true },
      { name: 'standard candle ratio',         latex: '\\dfrac{d_1}{d_2} = \\sqrt{\\dfrac{I_2}{I_1}}',       boards: 'AQA',             sheet: true },
      // Redshift z (Edexcel): on data booklet
      { name: 'redshift z',                    latex: 'z = \\dfrac{\\Delta\\lambda}{\\lambda} \\approx \\dfrac{v}{c}', boards: 'Edexcel', sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 22. MEDICAL PHYSICS
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Medical Physics',
    equations: [
      // X-ray attenuation: on AQA option (sheet=true on AQA booklet) and OCR Module 6 data booklet
      { name: 'X-ray attenuation',             latex: 'I = I_0\\,e^{-\\mu x}',                                boards: 'AQA OCR',         sheet: true },
      // Half-value thickness: AQA option
      { name: 'half-value thickness',          latex: '\\mu = \\dfrac{\\ln 2}{x_{1/2}}',                      boards: 'AQA',             sheet: true },
      // Acoustic impedance: on AQA option and OCR data booklet
      { name: 'acoustic impedance',            latex: 'Z = \\rho c',                                          boards: 'AQA OCR',         sheet: true },
      // Reflection coefficient: on AQA option and OCR data booklet
      { name: 'intensity reflection coefficient', latex: '\\dfrac{I_r}{I_0} = \\left(\\dfrac{Z_2 - Z_1}{Z_2 + Z_1}\\right)^2', boards: 'AQA OCR', sheet: true },
      // Doppler ultrasound: AQA option uses 2fv*costheta/c; OCR uses Deltaf/f = 2v*costheta/c
      { name: 'Doppler ultrasound (AQA)',      latex: '\\Delta f = \\dfrac{2f_0\\,v\\cos\\theta}{c}',         boards: 'AQA',             sheet: true },
      { name: 'Doppler ultrasound (OCR)',      latex: '\\dfrac{\\Delta f}{f} = \\dfrac{2v\\cos\\theta}{c}',   boards: 'OCR',             sheet: true },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 23. TURNING POINTS (AQA OPTION)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Turning Points',
    equations: [
      { name: 'specific charge (e/m)',         latex: '\\dfrac{e}{m} = \\dfrac{2V}{B^2 r^2}',                 boards: 'AQA',             sheet: false },
      { name: 'Millikan\'s oil drop',          latex: 'QE = mg - U',                                          boards: 'AQA',             sheet: false },
      { name: 'velocity selector',             latex: 'v = \\dfrac{E}{B}',                                    boards: 'AQA',             sheet: false },
      { name: 'Bragg diffraction',             latex: 'n\\lambda = 2d\\sin\\theta',                           boards: 'AQA',             sheet: false },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 24. ELECTRONICS (AQA OPTION)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Electronics',
    equations: [
      { name: 'inverting amplifier',           latex: 'V_{\\text{out}} = -\\dfrac{R_f}{R_{\\text{in}}}\\,V_{\\text{in}}', boards: 'AQA', sheet: false },
      { name: 'non-inverting amplifier',       latex: 'V_{\\text{out}} = \\left(1 + \\dfrac{R_f}{R_{\\text{in}}}\\right)V_{\\text{in}}', boards: 'AQA', sheet: false },
      { name: 'gain (dB)',                     latex: 'G = 10\\log\\dfrac{P_{\\text{out}}}{P_{\\text{in}}}',   boards: 'AQA',             sheet: false },
      { name: 'bandwidth \\u00D7 gain',        latex: 'f_{3\\text{dB}} \\times A = \\text{const}',            boards: 'AQA',             sheet: false },
    ]
  },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 25. LENSES & OPTICS (EDEXCEL)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  {
    section: 'Lenses & Optics',
    equations: [
      // Lens equation: on Edexcel data booklet; also AQA astrophysics option
      { name: 'thin lens equation',            latex: '\\dfrac{1}{u} + \\dfrac{1}{v} = \\dfrac{1}{f}',       boards: 'AQA Edexcel',     sheet: true },
      // Power of a lens: Edexcel only
      { name: 'power of a lens',              latex: 'P = \\dfrac{1}{f}',                                    boards: 'Edexcel',          sheet: true },
      // Lens combination: Edexcel only
      { name: 'combined lens power',           latex: 'P = P_1 + P_2 + \\cdots',                              boards: 'Edexcel',          sheet: true },
      // Magnification: Edexcel only (on data booklet)
      { name: 'magnification (lens)',          latex: 'm = \\dfrac{v}{u}',                                    boards: 'Edexcel',          sheet: true },
    ]
  },
];

const GEOGEBRA_APPLETS = [
  // â”€â”€ Practical Skills & Measurements â”€â”€
  { name: 'Line of Best Fit', id: 'jmh3mgvw', tags: 'practical skills measurements' },
  { name: 'Vernier Scale', id: 'hqwjvbb9', tags: 'practical skills measurements' },
  { name: 'Unit Conversion', id: 'vdfb5mbb', tags: 'practical skills' },
  { name: 'Standard Form and Prefixes', id: 'r24qpgmx', tags: 'practical skills' },
  { name: 'Micrometer with zero error', id: 'hwbdzex3', tags: 'practical skills measurements' },
  { name: 'Vernier calipers with zero error', id: 'mckecaev', tags: 'practical skills measurements' },
  { name: 'Measuring Speed of a Wave', id: 'd8jwwezs', tags: 'waves practical skills' },
  { name: 'Line of Best Fit II', id: 'yekg72t4', tags: 'practical skills measurements' },
  { name: 'Measurement in Error', id: 'xgdjpeuk', tags: 'practical skills measurements' },
  { name: 'Uncertainty and Best-Fit Lines', id: 'jqjfkacw', tags: 'practical skills measurements' },
  { name: 'Vernier Calipers - analogue', id: 'qux3mb6w', tags: 'practical skills measurements' },
  { name: 'Using a Vernier Scale', id: 'm5gtzq7g', tags: 'practical skills measurements' },
  { name: 'Vernier Calliper', id: 'hzpewvxa', tags: 'practical skills measurements' },
  // â”€â”€ Mechanics â€” Kinematics â”€â”€
  { name: 'Motion in a Straight Line', id: 'dpnjzsem', tags: 'mechanics kinematics' },
  { name: 'Motion Graph Ball', id: 'thsca6cp', tags: 'mechanics kinematics' },
  { name: 'Displacement time graph', id: 'emtkw4ky', tags: 'mechanics kinematics' },
  { name: 'Velocity & Displacement', id: 'prcynex2', tags: 'mechanics kinematics' },
  { name: 'Change in Velocity', id: 'uzuc4efh', tags: 'mechanics kinematics' },
  { name: 'Acceleration and velocity graphs', id: 'cvsnxwvx', tags: 'mechanics kinematics' },
  { name: 'Constant Acceleration and Average Speed', id: 'pfpu82kz', tags: 'mechanics kinematics' },
  { name: 'Uniform Acceleration in One Dimension', id: 'nh89y2qj', tags: 'mechanics kinematics' },
  { name: 'Two Objects Meeting SUVAT', id: 'kycncj74', tags: 'mechanics kinematics' },
  { name: 'Bouncing Ball', id: 'hsxbehga', tags: 'mechanics kinematics' },
  { name: 'Displacement-time graph: average and instantaneous velocity', id: 'aeuneakt', tags: 'mechanics kinematics' },
  { name: 'Motion graphs', id: 'vfjtatex', tags: 'mechanics kinematics' },
  { name: 'Vertical Throw + Graphs', id: 't98kypvb', tags: 'mechanics kinematics' },
  { name: 'Relative Velocity - Boat Problems', id: 'k2gejdst', tags: 'mechanics kinematics' },
  // â”€â”€ Mechanics â€” Projectiles â”€â”€
  { name: 'Projectile Motion - Components of Motion', id: 'rfam3ewx', tags: 'mechanics kinematics projectiles vectors' },
  { name: 'Simple Projectile Motion', id: 'hzznuy2x', tags: 'mechanics kinematics projectiles' },
  { name: 'Horizontal Projectiles', id: 'tkc9xs64', tags: 'mechanics projectiles' },
  { name: 'Horizontal Projectile and Target', id: 'wj9kbebc', tags: 'mechanics projectiles' },
  { name: 'Multiple Projectiles', id: 'svwvjk7u', tags: 'mechanics projectiles' },
  { name: 'Exploring Projectile Motion Concepts', id: 's2mh7vet', tags: 'mechanics kinematics projectiles' },
  { name: 'Projectile Motion: Adjust the Velocity Components', id: 'a7kbjpqb', tags: 'mechanics kinematics projectiles vectors' },
  { name: 'Projectiles in an Electric Field', id: 'wengbkrv', tags: 'mechanics projectiles electric fields' },
  // â”€â”€ Mechanics â€” Forces â”€â”€
  { name: 'Hanging Sign', id: 'cvy9tbeg', tags: 'mechanics forces' },
  { name: 'Block on an Incline: Forces', id: 'gebbuxqj', tags: 'mechanics forces' },
  { name: 'Terminal Velocity Skydiver', id: 'paychw6s', tags: 'mechanics forces terminal velocity' },
  { name: 'Terminal Velocity Parachute', id: 'nhyegufh', tags: 'mechanics forces terminal velocity' },
  { name: 'Equilibrium of a Wall Shelf', id: 'emp8hpdz', tags: 'mechanics forces' },
  { name: 'Forces in Equilibrium (Photoframe)', id: 'uzktkda2', tags: 'mechanics forces' },
  { name: 'Equilibrium Problem: Bar Supported by Cable', id: 'ac5n9ehm', tags: 'mechanics forces' },
  { name: 'Equilibrium Problem Practice', id: 'yzrfc9s4', tags: 'mechanics forces' },
  { name: 'Forces in Equilibrium + FBD', id: 'etx7mmys', tags: 'mechanics forces' },
  { name: 'Free Body Diagrams', id: 'cj7vxwab', tags: 'mechanics forces' },
  { name: 'Exploring Friction', id: 'mp53vmnj', tags: 'mechanics forces' },
  { name: 'Friction: Pulling a Box on a Horizontal Surface', id: 'd77xkj4u', tags: 'mechanics forces' },
  { name: 'Friction on a Banked Road', id: 'y5g7c8ks', tags: 'mechanics forces circular motion' },
  { name: 'Atwood Machine with an Incline', id: 'kcfqxfzb', tags: 'mechanics forces' },
  { name: 'Atwood Machines', id: 'yhrusfvj', tags: 'mechanics forces' },
  { name: 'Tension in Two Ropes', id: 'wwydjjrf', tags: 'mechanics forces' },
  { name: 'Two Masses and a Pulley - FBD and Newton\'s 2nd law', id: 'm8gpwubu', tags: 'mechanics forces' },
  { name: 'Scale in an Elevator', id: 'afgngpmq', tags: 'mechanics forces' },
  { name: 'Resultant Force Vector Diagram', id: 'qcsu2b84', tags: 'mechanics forces vectors' },
  // â”€â”€ Mechanics â€” Moments â”€â”€
  { name: 'Balancing Torques', id: 'jznqkrjn', tags: 'mechanics moments' },
  { name: 'Torque of a Couple', id: 'j8tg8ku4', tags: 'mechanics moments' },
  { name: 'Moment of a Force', id: 'uryhnazy', tags: 'mechanics forces moments' },
  // â”€â”€ Mechanics â€” Momentum â”€â”€
  { name: 'Ballistic Pendulum', id: 'ndkumqjs', tags: 'mechanics momentum' },
  { name: 'Ballistic Pendulum (Graph)', id: 'ytuprrd9', tags: 'mechanics momentum' },
  { name: 'One Dimensional Elastic Collisions', id: 'wqacfbjs', tags: 'mechanics momentum' },
  { name: 'Two Dimensional Elastic Collisions', id: 'pcrdaz4r', tags: 'mechanics momentum' },
  { name: 'Momentum & Energy: Elastic and Inelastic Collisions', id: 'mr4xgutd', tags: 'mechanics momentum energy' },
  { name: 'Conservation of Momentum', id: 'yeebqgxs', tags: 'mechanics momentum' },
  { name: 'Elastic & Inelastic Collisions', id: 'wndfwbhk', tags: 'mechanics momentum' },
  { name: 'Glancing Collisions Elastic', id: 'j7u57far', tags: 'mechanics momentum' },
  { name: 'Glancing Collisions - Inelastic', id: 'uvb3sn7h', tags: 'mechanics momentum' },
  { name: 'Impulse from a Changing Force', id: 'nm2zdzf2', tags: 'mechanics forces momentum' },
  { name: 'Impulse from a Constant Force', id: 'xdzvjhv5', tags: 'mechanics forces momentum' },
  { name: 'Multiple Ejections vs Rocket Equation', id: 'cpmantw5', tags: 'mechanics momentum' },
  // â”€â”€ Mechanics â€” Energy â”€â”€
  { name: 'Work done on object', id: 'v3msvq5e', tags: 'mechanics energy' },
  { name: 'Conservation of Mechanical Energy', id: 'scuqwevh', tags: 'mechanics energy' },
  { name: 'Conservation of Energy on a Ramp', id: 'zqegwvvb', tags: 'mechanics energy' },
  { name: 'Conservation of Mechanical Energy: Mass on a Vertical Spring', id: 'rqmb8wcy', tags: 'mechanics energy' },
  { name: 'Bungee Jumping - acceleration, velocity, displacement', id: 'rj6rz7wg', tags: 'mechanics kinematics energy' },
  { name: 'Bungee Jumping With Energy Conservation', id: 'vfs28svs', tags: 'mechanics energy' },
  { name: 'Graphs of Energy I', id: 'vh7v4ajb', tags: 'mechanics energy' },
  { name: 'Graphs of Energy II', id: 'zmjs3uzv', tags: 'mechanics energy' },
  { name: 'Graphs of Energy IV', id: 'ds3wzgzw', tags: 'mechanics energy' },
  { name: 'Graphs of Energy V', id: 'bkg8eayt', tags: 'mechanics energy' },
  { name: 'Graphs of Energy VI', id: 'm6dwzkkh', tags: 'mechanics energy' },
  { name: 'KE and Force Graphs', id: 'ryrq8gsj', tags: 'mechanics energy' },
  { name: 'Gravitational Potential Energy', id: 'gbpthuep', tags: 'mechanics energy gravitational fields' },
  { name: 'Mass on a Spring: Potential and Kinetic Energy', id: 'tcwfgyys', tags: 'mechanics energy SHM oscillations' },
  // â”€â”€ Mechanics â€” Vectors â”€â”€
  { name: 'Resolution of Vectors', id: 'kb8zcgqa', tags: 'mechanics vectors' },
  { name: 'Vector Components', id: 'fmyyw6v9', tags: 'mechanics vectors' },
  { name: 'Vector Addition', id: 'f7knh8ts', tags: 'mechanics vectors' },
  { name: 'Vector Addition and Subtraction Practice', id: 'wydu7ath', tags: 'mechanics vectors' },
  { name: 'Head to Tail Addition', id: 'b3ym4hbu', tags: 'mechanics vectors' },
  { name: 'Polygon Vector Addition', id: 'yqvueyhq', tags: 'mechanics vectors' },
  { name: 'Electric Field Vectors', id: 'g9fbj68r', tags: 'mechanics vectors electric fields' },
  // â”€â”€ Mechanics â€” Fluids â”€â”€
  { name: 'Buoyancy', id: 'urne7skn', tags: 'mechanics fluids' },
  { name: 'Boyancy', id: 'zusq23mt', tags: 'mechanics fluids' },
  { name: 'Pressure in a U Tube', id: 'fumvupyw', tags: 'mechanics fluids pressure' },
  { name: 'Pascal\'s Principle - Hydraulic Lift', id: 'ncufwjb3', tags: 'mechanics fluids pressure' },
  { name: 'Fluid Pressure in a Reservoir', id: 'wtpdpcdu', tags: 'mechanics fluids pressure' },
  { name: 'Fluid Pressure in 2 Beakers', id: 'znygg8mh', tags: 'mechanics fluids pressure' },
  { name: 'Effetto Venturi', id: 'wm6tduc7', tags: 'mechanics fluids' },
  { name: 'Mass, Volume, and Density', id: 'hhhavpqh', tags: 'mechanics density' },
  // â”€â”€ Mechanics â€” Rotational â”€â”€
  { name: 'Moment of Inertia: Rolling and Sliding Down an Incline', id: 'wnu4jb74', tags: 'mechanics rotational' },
  { name: 'Sliding vs Rolling vs Tumbling', id: 'sjqpvqeh', tags: 'mechanics rotational' },
  { name: 'iPad Optimized Inclined Plane Rolling without Slipping', id: 'tmve8d7v', tags: 'mechanics rotational' },
  // â”€â”€ Materials â”€â”€
  { name: 'Stress-Strain Curve', id: 'zcyjq66q', tags: 'materials' },
  { name: 'Stress-Strain Plot', id: 'bhc4kfku', tags: 'materials' },
  { name: 'Hooke\'s Law', id: 'jk9uddau', tags: 'materials hookes law' },
  // â”€â”€ Circular Motion â”€â”€
  { name: 'Rotational Velocity of Ants', id: 'vdmhjyxp', tags: 'circular motion mechanics' },
  { name: 'Circular Motion', id: 'cbzkubc6', tags: 'circular motion' },
  { name: 'Uniform Circular Motion', id: 'jnm5jybr', tags: 'circular motion' },
  { name: 'Uniform Circular Motion v2', id: 'gts5vuwy', tags: 'circular motion' },
  { name: 'Centripetal Acceleration', id: 'yqn6dmpa', tags: 'circular motion mechanics' },
  { name: 'Vertical circular motion (uniform)', id: 'up74yvvj', tags: 'circular motion' },
  { name: 'Vertical Circles', id: 'rrumevhp', tags: 'circular motion' },
  { name: 'Vertical Circles - Constant Speed', id: 'gzpdfznu', tags: 'circular motion' },
  { name: 'The Conical Pendulum', id: 'xq7tte5n', tags: 'circular motion' },
  { name: 'Conical Pendulum 3D', id: 'vefpvmga', tags: 'circular motion' },
  { name: 'Conical Pendulum Adjustable speed', id: 'wzhaanku', tags: 'circular motion' },
  { name: 'Uniform Circular Motion - Conical Pendulum', id: 'rwe5uzm2', tags: 'circular motion' },
  { name: 'Banked Turn - Fast', id: 'e7tgvzwk', tags: 'circular motion' },
  { name: 'A car on a circular banked track', id: 'u3xttcuj', tags: 'circular motion' },
  { name: 'Friction as a Centripetal Force: Corner', id: 'cfzrtmdh', tags: 'circular motion' },
  { name: 'Circular and Elliptical Orbits', id: 'pr4jbwyn', tags: 'circular motion gravitational fields' },
  { name: 'Angular Displacement', id: 'dfmvg8vb', tags: 'circular motion' },
  // â”€â”€ SHM & Oscillations â”€â”€
  { name: 'Energy in SHM', id: 'qfpse3sj', tags: 'SHM oscillations' },
  { name: 'Damped harmonic motion', id: 'uwwxeg5n', tags: 'SHM oscillations' },
  { name: 'Damped Oscillation', id: 'zp3rm4yx', tags: 'SHM oscillations' },
  { name: 'Damped SHM', id: 'zd3zjdc2', tags: 'SHM oscillations' },
  { name: 'Uniform circular motion and SHM', id: 't9c8futf', tags: 'SHM oscillations circular motion' },
  { name: 'SHM and Uniform Circular Motion', id: 'twustabp', tags: 'SHM oscillations circular motion' },
  { name: 'Simple Pendulum', id: 'mxfb7epv', tags: 'SHM oscillations' },
  { name: 'Pendulum', id: 'bebc7tq5', tags: 'SHM oscillations' },
  { name: 'Graphs of a Pendulum SHM', id: 'kjw6a5gm', tags: 'SHM oscillations' },
  { name: 'SHM in a Pendulum no graph', id: 'vgucfsyy', tags: 'SHM oscillations' },
  { name: 'SHM in a Pendulum with Graphs', id: 'abmueeb2', tags: 'SHM oscillations' },
  { name: 'Spring in SHM - Time Period (Horizontal)', id: 'bkewrk85', tags: 'SHM oscillations' },
  { name: 'Spring in SHM - Time Period (Vertical)', id: 'cgnve3wr', tags: 'SHM oscillations' },
  { name: 'Spring in SHM - Energy', id: 'qh7uff6d', tags: 'SHM oscillations' },
  { name: 'Spring in SHM - Force and Acceleration', id: 'zd2j5n23', tags: 'SHM oscillations' },
  { name: 'Spring in SHM - Work Done by Friction', id: 'dztqn8qa', tags: 'SHM oscillations' },
  { name: 'Simple Harmonic Motion: Mass on a Spring', id: 'mjehevce', tags: 'SHM oscillations' },
  { name: 'Simple Harmonic Motion', id: 'kbvjyafc', tags: 'SHM oscillations' },
  { name: 'Forced Oscillation', id: 'p79s9zpn', tags: 'SHM oscillations resonance' },
  { name: 'Resonance with Masses on Springs', id: 'vcdafvt8', tags: 'SHM oscillations resonance' },
  { name: 'Reflection, Superposition, and Resonance on a String', id: 'v9egxqnu', tags: 'SHM oscillations resonance waves' },
  { name: 'SHM and Waves', id: 'zsffxztz', tags: 'SHM oscillations' },
  { name: 'Dropping a Mass on Another Oscillating Mass', id: 'rmpcnyj9', tags: 'SHM oscillations' },
  { name: 'Falling Spring with Attached Masses', id: 'sm4pxwjp', tags: 'SHM oscillations' },
  { name: 'Balistic Pendulum', id: 'x9s367hu', tags: 'SHM oscillations mechanics' },
  { name: 'Air Column Resonance', id: 'zjppgt8k', tags: 'SHM oscillations waves' },
  { name: 'Air Column Resonance with Longitudinal Waves', id: 'sjdysxsv', tags: 'SHM oscillations waves' },
  // â”€â”€ Waves â”€â”€
  { name: 'Stationary Waves', id: 'bdtpzdub', tags: 'waves standing stationary nodes antinodes' },
  { name: 'Stationary wave due to reflection', id: 'ttwjssjh', tags: 'waves stationary' },
  { name: 'Stationary Waves on a String Required Prac', id: 'bz6j3puf', tags: 'waves stationary practical' },
  { name: 'Standing Waves Basic', id: 'mg58ysmh', tags: 'waves standing' },
  { name: 'Standing Waves', id: 'na76zfmm', tags: 'waves standing' },
  { name: 'Basic Wave Properties', id: 'vwy6puvj', tags: 'waves' },
  { name: 'Basic Wave Properties Comparing', id: 'psbpvsan', tags: 'waves' },
  { name: 'Progressive wave particle movement', id: 'cgpkfbvn', tags: 'waves progressive' },
  { name: 'Harmonic Wave', id: 'r7za6scs', tags: 'waves' },
  { name: 'Sinusoidal Motion Wave Manipulation', id: 'fxskaupv', tags: 'waves' },
  { name: 'Longitudinal and Transverse Wave Basics', id: 'fp3jvmcj', tags: 'waves' },
  { name: 'Superposition of waves', id: 'akmtvmfq', tags: 'waves superposition' },
  { name: 'Wave Pulse Interference and Superposition', id: 'cp3qe6en', tags: 'waves superposition' },
  { name: 'Wave Interference', id: 'fqbkrkn5', tags: 'waves interference' },
  { name: 'Wave Interference SOUND', id: 'rjjvedgr', tags: 'waves interference sound' },
  { name: 'Wave Interference Practical', id: 'jmaru7js', tags: 'waves interference practical' },
  { name: 'Thin Film Interference', id: 'aaxdnxeg', tags: 'waves interference thin film optics' },
  { name: 'Phase Difference Waves', id: 'dhgmjxhn', tags: 'waves phase' },
  { name: 'Phase difference between two particles on a wave', id: 'mrbh4yys', tags: 'waves phase' },
  { name: 'Phase Difference between two waves', id: 'r9j5fbg6', tags: 'waves phase' },
  { name: 'Phase Difference two particles', id: 'pkbfuknt', tags: 'waves phase' },
  { name: 'Polarisation', id: 'z8jjmvgm', tags: 'waves polarisation' },
  { name: 'Polarization', id: 'vzfeuyen', tags: 'waves polarisation' },
  { name: 'Harmonics for Closed Pipe', id: 'esav8b4r', tags: 'waves harmonics' },
  { name: 'Harmonics of Closed Pipes', id: 'djmeymbw', tags: 'waves harmonics' },
  { name: 'Harmonics of Open Pipes', id: 'kmbbpzgt', tags: 'waves harmonics' },
  { name: 'Doppler Effect', id: 'pryabt6r', tags: 'waves doppler' },
  { name: 'The Doppler Effect & Sonic Boom', id: 'tm72xnyy', tags: 'waves doppler' },
  { name: 'Electromagnetic Waves', id: 'gcnqhtwy', tags: 'waves electromagnetic spectrum' },
  // â”€â”€ Waves â€” Diffraction & Young's â”€â”€
  { name: 'Double Slit Interference', id: 'qzfneyhk', tags: 'waves diffraction double slit' },
  { name: 'Double slit diffraction geometry', id: 'ugeagngu', tags: 'waves diffraction' },
  { name: 'Double Slit Interference - Path Difference', id: 'nwfc9fmz', tags: 'waves diffraction' },
  { name: 'Double Slit Interference - Small Angle Approximation', id: 'wsudkcyz', tags: 'waves diffraction' },
  { name: 'Double Slit Interference - Fringe Location', id: 'tvbpgr73', tags: 'waves diffraction' },
  { name: 'Double Slit Interference - Fringe Location v2', id: 'gyscsppn', tags: 'waves diffraction' },
  { name: 'Double-Slit Diffraction', id: 'pacsmsn2', tags: 'waves diffraction' },
  { name: 'Double Slit Diffraction and Interference', id: 'n8tjxgzh', tags: 'waves diffraction' },
  { name: 'Diffraction Grating Spectrum', id: 'fufbqwbx', tags: 'waves diffraction grating' },
  { name: 'Huygens Principle', id: 'pd9mcj4g', tags: 'waves huygens' },
  { name: 'Huygens reflection', id: 'tydwjzdf', tags: 'waves huygens reflection' },
  { name: 'Huygens refraction', id: 'jewvkkkq', tags: 'waves huygens refraction snell' },
  { name: 'Huygens Principle on a Single Slit', id: 'zha2fgcj', tags: 'waves diffraction huygens' },
  // â”€â”€ Waves â€” Refraction â”€â”€
  { name: 'Refraction in a Right Triangle', id: 'qzskn7zj', tags: 'waves refraction' },
  { name: 'Refraction on Parallel Surfaces', id: 'fnywvqtb', tags: 'waves refraction' },
  { name: 'Refraction in a Triangle', id: 'n9v3fgum', tags: 'waves refraction' },
  { name: 'Refraction on a Semicircle', id: 'cs4smcvp', tags: 'waves refraction' },
  { name: 'Refraction in a Semicircle', id: 'kabvbcg8', tags: 'waves refraction' },
  { name: 'Refraction on Parallel Surfaces - 3 Mediums', id: 'kuyxc9uk', tags: 'waves refraction' },
  { name: 'Reflection and Refraction', id: 'cebhpccw', tags: 'waves refraction optics' },
  { name: 'Reflection and Refraction for iPad', id: 'vxersvpe', tags: 'waves refraction optics' },
  // â”€â”€ Optics â”€â”€
  { name: 'Reflecting Telescopes', id: 'vyktsyrj', tags: 'optics telescopes' },
  { name: 'Eye OCR Optics', id: 'wrqkr6qh', tags: 'optics eye' },
  { name: 'Lens Combinations - 2 Converging Lenses', id: 'xgtdacxh', tags: 'optics lenses' },
  { name: 'Lens Combinations - 1 Diverging & 1 Converging', id: 'dhnnbwj3', tags: 'optics lenses' },
  { name: 'Concave and Convex Lenses + Calcs', id: 'rdduapsh', tags: 'optics lenses' },
  { name: 'Lenses Construction', id: 'maxqumgu', tags: 'optics lenses' },
  { name: 'Lens Refraction and Spherical Aberration', id: 'zm5phkpj', tags: 'optics lenses refraction' },
  { name: 'Reflection in Plane Mirrors', id: 'vct2ge9t', tags: 'optics mirrors' },
  { name: 'Concave Spherical Mirror', id: 'yrpfmrfp', tags: 'optics mirrors' },
  { name: 'Image Formation in Plane Mirrors', id: 'dcv4tnge', tags: 'optics mirrors' },
  { name: 'Light Mixing', id: 'd6ufupfg', tags: 'optics light' },
  // â”€â”€ Thermal Physics â”€â”€
  { name: 'PV Diagram', id: 'zyfbgrtv', tags: 'thermal physics gas pressure volume ideal gas' },
  { name: 'Gas transformations', id: 'btttyrht', tags: 'thermal physics gas laws' },
  { name: 'Isothermal transformations', id: 'fpzq6z7t', tags: 'thermal physics isothermal gas' },
  { name: 'PV Graphs - Lab Situations', id: 'w8zmeajh', tags: 'thermal physics' },
  { name: 'PV Graphs', id: 'hufhyvqc', tags: 'thermal physics' },
  { name: 'Exploring PV Diagrams', id: 'xstjk2ug', tags: 'thermal physics' },
  { name: 'Ideal Gas PV Diagram', id: 'ersv9thu', tags: 'thermal physics ideal gas' },
  { name: 'Ideal Gas Laws', id: 'xn6yaqeb', tags: 'thermal physics ideal gas' },
  { name: 'Deriving Pressure from an Ideal Gas', id: 'cztsspgh', tags: 'thermal physics kinetic theory' },
  { name: 'Heat Capacity and Phase Change', id: 'yrfd5vjt', tags: 'thermal physics' },
  { name: 'Efficiencies of a Heat Engine', id: 'kbdn3ade', tags: 'thermal physics' },
  // â”€â”€ Electric Fields â”€â”€
  { name: 'Electric Potential F vs R graph', id: 'dc5xv6pk', tags: 'electric fields potential' },
  { name: 'Electric Potential', id: 'yd7tzdr6', tags: 'electric fields potential' },
  { name: 'Electric Potential and Electric Field', id: 'aa9kkfry', tags: 'electric fields potential' },
  { name: 'Electric Potential 3D', id: 'kwgez57t', tags: 'electric fields potential' },
  { name: 'Electric Field & Potential', id: 'm6bemjfz', tags: 'electric fields potential' },
  { name: 'Electric Field', id: 'gnknrdtd', tags: 'electric fields' },
  { name: 'Electric Field Point Charge', id: 'yzpewk2n', tags: 'electric fields' },
  { name: 'Electric Fields & Equipotentials', id: 'gubza64t', tags: 'electric fields equipotentials' },
  { name: 'Isolines in a Uniform Electric Field', id: 'qwjqrxaw', tags: 'electric fields equipotentials' },
  { name: 'Coulombs Law 2 charges', id: 'mtms6zf8', tags: 'electric fields coulomb' },
  { name: 'Coulomb\'s Law With Point Charges', id: 'hntsgemk', tags: 'electric fields coulomb' },
  { name: 'Coulomb\'s Law with Two Charged Objects', id: 'pzhppbwj', tags: 'electric fields coulomb' },
  { name: 'Coulomb\'s Law with Two Charged Objects (No Graphs)', id: 'rtgx7hyy', tags: 'electric fields coulomb' },
  { name: 'Electric Charge and the Electrostatic Force', id: 'n5neskt6', tags: 'electric fields' },
  { name: 'Electrostatic Force at an Angle', id: 'rrvgu6rq', tags: 'electric fields' },
  { name: 'Electrostatic Force Calculations', id: 'trxwdq3z', tags: 'electric fields' },
  { name: 'Electrostatic Forces of Two Charges on a Third', id: 'fzzqqgvw', tags: 'electric fields' },
  { name: 'Net Electrostatic Force on Multiple Charges', id: 'jz9zhc2x', tags: 'electric fields' },
  { name: 'Integral to Find Electric Field for a Line of Charge', id: 'kemkn4ug', tags: 'electric fields' },
  { name: 'Charged Particle in an Electric Field', id: 'dw5kg6eb', tags: 'electric fields' },
  { name: 'Parallel plate capacitor', id: 'uhmthduj', tags: 'electric fields capacitance' },
  { name: 'The Millikan Oil-Drop Experiment', id: 'tbe82ndj', tags: 'electric fields quantum physics' },
  // â”€â”€ Capacitance â”€â”€
  { name: 'Capacitors', id: 'ywqeytbe', tags: 'capacitance' },
  { name: 'Capacitor Lab', id: 'twknp358', tags: 'capacitance' },
  { name: 'LC Circuit + Graph', id: 'vtqp7ezx', tags: 'capacitance magnetic fields circuits' },
  // â”€â”€ Magnetic Fields â”€â”€
  { name: 'B field around a wire', id: 'n2yshqhn', tags: 'magnetic fields wire current' },
  { name: 'Wire moving in a B Field', id: 'jm6smk2r', tags: 'magnetic fields EMF induction' },
  { name: 'Charge moving in a non uniform B field', id: 'fcrahsax', tags: 'magnetic fields charged particle' },
  { name: 'Charged Particles in a Magnetic Field', id: 'ddmcg4wr', tags: 'magnetic fields' },
  { name: 'Charged Particles in a Magnetic Field - Intro Lab 1', id: 'ckuekvfr', tags: 'magnetic fields' },
  { name: 'Charged Particles in a Magnetic Field - Intro Lab 2', id: 'u5bzxcw4', tags: 'magnetic fields' },
  { name: 'Charged Particles in a Magnetic Field - Intro Lab 3', id: 'apaa8hx8', tags: 'magnetic fields' },
  { name: 'Charged particle in a Magnetic Field', id: 'qq8apvds', tags: 'magnetic fields' },
  { name: 'Charged Particle in a Magnetic Field 3D', id: 'aw8d92qb', tags: 'magnetic fields 3D' },
  { name: 'Charged Particles in Parallel Magnetic and Electric Fields', id: 'mwujkhck', tags: 'magnetic fields electric fields' },
  { name: 'Point Charge in a Magnetic Field', id: 'awrxvr8m', tags: 'magnetic fields' },
  { name: 'Faraday\'s Law', id: 'ncqtte4n', tags: 'magnetic fields faraday induction' },
  { name: 'Motional EMF', id: 'uaw7jhvf', tags: 'magnetic fields electromagnetic induction' },
  { name: 'Magnetic Induction', id: 'xxyymecq', tags: 'magnetic fields induction' },
  { name: 'DC Motor Work', id: 't7rtcj4v', tags: 'magnetic fields motors' },
  { name: 'DC Motor', id: 'cuzfxwjx', tags: 'magnetic fields motors' },
  // â”€â”€ Electricity & Circuits â”€â”€
  { name: 'Electric Circuits', id: 'ycyu43ck', tags: 'electricity circuits' },
  { name: 'Circuits', id: 'wawdmbuw', tags: 'electricity circuits' },
  { name: 'Multi-Loop Circuit Resistors', id: 'txstptwv', tags: 'electricity circuits resistors' },
  { name: 'Resistors in Circuits', id: 'g2ftjp3x', tags: 'electricity circuits resistors' },
  { name: 'Internal Resistance', id: 'gjszugb8', tags: 'electricity circuits' },
  { name: 'RC Circuit + Graph', id: 'jeraz6fe', tags: 'electricity circuits capacitance' },
  { name: 'Simple RC Circuits', id: 'ubmrqswy', tags: 'electricity circuits capacitance' },
  { name: 'Oscilloscope', id: 'dux4t2xv', tags: 'electricity oscilloscope' },
  // â”€â”€ Quantum Physics â”€â”€
  { name: 'Electron Diffraction Pattern', id: 'qgtdjgs3', tags: 'quantum physics waves diffraction electron de broglie' },
  { name: 'De Broglie Wavelength of Electrons', id: 'xk3f4wvm', tags: 'quantum physics waves de broglie' },
  { name: 'Photoelectric Effect', id: 'nxsynykt', tags: 'quantum physics photoelectric' },
  { name: 'Energy Level Diagrams', id: 'fyzdhvht', tags: 'quantum physics energy levels' },
  { name: 'Energy Level Diagrams - Hydrogen', id: 'nycbhavm', tags: 'quantum physics energy levels hydrogen' },
  { name: 'Energy of Light', id: 'quppju9m', tags: 'quantum physics photons' },
  { name: 'Energy of LEDs', id: 'aujv2xwa', tags: 'quantum physics LED photons' },
  { name: 'Photon Absorption/Ionization & Energy Level Diagram', id: 'd8qhb3ms', tags: 'quantum physics photons energy levels' },
  // â”€â”€ Nuclear Physics â”€â”€
  { name: 'Interatomic Force', id: 'dgmmktja', tags: 'nuclear physics interatomic force' },
  { name: 'Strong Nuclear Force', id: 'rppu4awe', tags: 'nuclear physics strong force' },
  { name: 'Energy in Alpha Decay', id: 'emftr6zj', tags: 'nuclear physics alpha decay' },
  { name: 'Mass Spectrometry', id: 'bv77n3nq', tags: 'nuclear physics particles mass spectrometry' },
  // â”€â”€ Gravitational Fields â”€â”€
  { name: 'Orbital Energy', id: 'h37p65cq', tags: 'gravitational fields orbits' },
  { name: 'Orbital Velocity', id: 'typkd9sk', tags: 'gravitational fields orbits' },
  { name: 'Gravitational Potential between two masses', id: 'wxymmbaw', tags: 'gravitational fields potential' },
  { name: 'Potential Between 2 Planets', id: 'pdwydmaq', tags: 'gravitational fields potential' },
  { name: 'Energy of a Satellite', id: 'tdcph8mb', tags: 'gravitational fields satellite' },
  { name: 'Total Energy of Satellite', id: 's9x8puc8', tags: 'gravitational fields satellite' },
  { name: '3D Gravitational Field', id: 'bajmgnbc', tags: 'gravitational fields' },
  { name: 'Gravitational Field Strength Between two Planets', id: 'dayvavgr', tags: 'gravitational fields' },
  { name: 'Gravitation Law', id: 'yxsysckf', tags: 'gravitational fields' },
  { name: 'Gravitation Law Equations', id: 'y4npwrjm', tags: 'gravitational fields' },
  { name: 'Escape Velocity', id: 'hyhsuehx', tags: 'gravitational fields mechanics' },
  { name: 'Acceleration of Gravity on Planets', id: 'hmn7chjr', tags: 'gravitational fields' },
  { name: 'Acceleration of G on a planet', id: 'wc32pgnu', tags: 'gravitational fields' },
  { name: 'Compare different planets orbital speed', id: 'sh677srz', tags: 'gravitational fields orbits' },
  { name: 'Mass of Particles & Gravity', id: 'wqwpw54f', tags: 'gravitational fields' },
  { name: 'Field of Two Masses', id: 'ftf5jdx2', tags: 'gravitational fields' },
  // â”€â”€ Astrophysics â”€â”€
  { name: 'Stellar Parallax', id: 'btucrhet', tags: 'astrophysics parallax distance stars' },
  { name: 'Parallax Angle (Space)', id: 'zgq9hash', tags: 'astrophysics parallax angle' },
  // â”€â”€ Medical Physics â”€â”€
  { name: 'A-Scan (Ultrasound)', id: 'pwh7fecw', tags: 'medical physics ultrasound imaging' },
  // â”€â”€ Special Relativity â”€â”€
  { name: 'Special Relativity v2', id: 'xwvbdmts', tags: 'special relativity' },
  { name: 'Special Relativity', id: 'bmbf9nh3', tags: 'special relativity' },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // NEW: From 9702-physics.blogspot.com (214 additional applets)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  // â”€â”€ Practical Skills & Measurements (new) â”€â”€
  { name: 'High Resolution Vernier Calipers', id: 'DemUu87n', tags: 'practical skills measurements' },
  { name: 'Micrometer Screw Gauge Readings', id: 'vwrafxmp', tags: 'practical skills measurements' },
  { name: 'Cathode Ray Oscilloscope', id: 'kh7SAVdD', tags: 'electricity practical skills' },
  { name: 'Adding and Subtracting Uncertainties', id: 'Uy5Zq8ws', tags: 'practical skills measurements' },
  { name: 'Line of Best Fit (alt)', id: 'f96zyayz', tags: 'practical skills measurements' },
  { name: 'Least Square Best Fit', id: 'zHwQNvpW', tags: 'practical skills measurements' },
  { name: 'Physics Diagrams Maker', id: 'vUK7gGkN', tags: 'practical skills' },

  // â”€â”€ Mechanics â€” Kinematics (new) â”€â”€
  { name: 'Gradient of A Graph Rollercoaster', id: 'z6ewahft', tags: 'mechanics kinematics' },
  { name: 'Displacement Velocity Acceleration Graphs', id: 'Kc88gNS3', tags: 'mechanics kinematics' },
  { name: 'Weird DVA Graphs', id: 'pdNj3DgD', tags: 'mechanics kinematics' },
  { name: 'Average vs Instantaneous Velocity', id: 'mctbbgzn', tags: 'mechanics kinematics' },
  { name: 'Graphs of Ball Thrown Vertically', id: 'qpxcs6vb', tags: 'mechanics kinematics' },
  { name: 'Graph of Ball with Rebound', id: 'q7qan5jz', tags: 'mechanics kinematics' },
  { name: 'Graph of Trampoline Motion', id: 'R6q4pz6J', tags: 'mechanics kinematics' },
  { name: 'Relative Velocities', id: 'DmhSaMnE', tags: 'mechanics kinematics' },

  // â”€â”€ Mechanics â€” Projectiles (new) â”€â”€
  { name: 'Projectile Initial Velocity Affects Path', id: 'rspzuwrs', tags: 'mechanics projectiles' },
  { name: 'Projectile Motion Vectors Non-Animated', id: 'JDxA5kPR', tags: 'mechanics projectiles' },
  { name: 'Horizontal Projectile (alt)', id: 'c6qqNRjw', tags: 'mechanics projectiles' },
  { name: 'Projectile Motion with Air Resistance', id: 'mPku8Yu6', tags: 'mechanics projectiles' },
  { name: 'Projectile Motion with Drag Force', id: 'rYmNxYMY', tags: 'mechanics projectiles' },
  { name: 'Projectile Motion Air Resistance Ellipse', id: 'ac6hexma', tags: 'mechanics projectiles' },
  { name: 'Projectile Game Shoot the Monkey', id: 'pEvjAEY7', tags: 'mechanics projectiles' },

  // â”€â”€ Mechanics â€” Forces (new) â”€â”€
  { name: 'Free Body Diagrams', id: 'kadDJnnw', tags: 'mechanics forces' },
  { name: 'Pulley with Two Hanging Masses', id: 'xVcYXtMw', tags: 'mechanics forces' },
  { name: 'Pulley on Table', id: 'fpczhdfk', tags: 'mechanics forces' },
  { name: 'Scale in Elevator', id: 'NgAZr3dQ', tags: 'mechanics forces' },
  { name: 'Velocity Parachutist Graph with Forces', id: 'bkgb7fdz', tags: 'mechanics forces terminal velocity' },
  { name: 'Terminal Velocity Parachutist Graph', id: 'cqmxbk2v', tags: 'mechanics forces terminal velocity' },
  { name: 'Choosing Terminal Velocities of Parachutist', id: 'nmkzvg7c', tags: 'mechanics forces terminal velocity' },
  { name: 'Exploring Friction', id: 'jZeNyTTj', tags: 'mechanics forces' },
  { name: 'Inclined Plane Force Vectors FBD', id: 'myxfH8tW', tags: 'mechanics forces' },
  { name: 'Inclined Plane Pulley with Friction', id: 'jVUxzEry', tags: 'mechanics forces' },
  { name: 'Hanging Picture Frame Equilibrium', id: 'jqp9z9qc', tags: 'mechanics forces' },
  { name: 'Centre of Gravity Bottle Flip', id: 'bxz2adv8', tags: 'mechanics forces' },
  { name: 'Double Tension Hanging Equilibrium FBD', id: 'Q9hVSxcR', tags: 'mechanics forces' },
  { name: 'Double Tension Hanging Vector Triangle', id: 'CEBvTU3Q', tags: 'mechanics vectors forces' },

  // â”€â”€ Mechanics â€” Moments (new) â”€â”€
  { name: 'COG Stability Toppling Block', id: 'qszfx35k', tags: 'mechanics forces moments' },
  { name: 'Topple Block Uniform Density', id: 'xmx55cj5', tags: 'mechanics forces moments' },
  { name: 'Topple Block Varying COG', id: 'wdjjugwz', tags: 'mechanics forces moments' },
  { name: 'Wall Shelf Equilibrium (alt)', id: 'xdbr7qr5', tags: 'mechanics forces moments' },
  { name: 'Inclined Ladder Against Wall', id: 'cm7fqnnp', tags: 'mechanics forces moments' },
  { name: 'Static Equilibrium of Arm', id: 'eDz9xba5', tags: 'mechanics forces moments' },

  // â”€â”€ Mechanics â€” Momentum (new) â”€â”€
  { name: 'Impulsive Force Graph', id: 'cwVjvXCn', tags: 'mechanics momentum' },
  { name: 'Newtons Cradle', id: 'c5jjRGvc', tags: 'mechanics momentum' },
  { name: 'Momentum Graph in Collisions', id: 'XTQqxU7n', tags: 'mechanics momentum' },

  // â”€â”€ Mechanics â€” Fluids & Pressure (new) â”€â”€
  { name: 'Hydrostatic Pressure Forces on Object', id: 'xxeyzkqq', tags: 'mechanics fluids pressure' },
  { name: 'Diver Pressure in Depth', id: 'MK7KhgSh', tags: 'mechanics fluids pressure' },
  { name: 'Density Pressure Force in 2 Beakers', id: 'wWkbsTzs', tags: 'mechanics fluids pressure' },
  { name: 'Upthrust on Block', id: 'gYwbsBfG', tags: 'mechanics fluids' },
  { name: 'Pressure in U Tube', id: 'dg3Yn8U8', tags: 'mechanics fluids pressure' },

  // â”€â”€ Mechanics â€” Energy (new) â”€â”€
  { name: 'Work Done by Two Forces as Area Under Graph', id: 'qvhthk5a', tags: 'mechanics energy' },
  { name: 'Freefall Energy Graph', id: 'XDDECKtJ', tags: 'mechanics energy' },
  { name: 'Bouncing Freefall Energy Graph', id: 'QxBc6t9r', tags: 'mechanics energy' },
  { name: 'Conservation of Energy on Ramp', id: 'GV3z6qgk', tags: 'mechanics energy' },
  { name: 'Single Ramp Energy Graph', id: 'H952a2Wc', tags: 'mechanics energy' },
  { name: 'Double Ramp Energy Graph', id: 'rVxC99XV', tags: 'mechanics energy' },
  { name: 'Instant vs Average Power', id: 'evtcje9v', tags: 'mechanics energy' },

  // â”€â”€ Materials (new) â”€â”€
  { name: 'Hookes Law', id: 'tb98aHHz', tags: 'materials hookes law' },
  { name: 'Young Modulus Stress-Strain Graph', id: 'AMjGYhNm', tags: 'materials' },

  // â”€â”€ Waves â€” General (new) â”€â”€
  { name: 'Basic Wave Properties', id: 'cwyjdf2y', tags: 'waves' },
  { name: 'Longitudinal vs Transverse Wave', id: 'auyft2pd', tags: 'waves' },
  { name: 'Progressive Wave Particle Oscillation', id: 'jnjsgsd5', tags: 'waves' },
  { name: 'Displacement vs Distance-time Graphs Progressive Wave', id: 'f7faw3r6', tags: 'waves' },
  { name: 'Displacement-Position Graph Longitudinal Wave', id: 'FDGVdN3J', tags: 'waves' },
  { name: 'Measuring Speed of A Wave (alt)', id: 'yxmv39jq', tags: 'waves practical skills' },
  { name: 'Phase Difference Between Two Waves', id: 'ymyxaejr', tags: 'waves' },
  { name: 'Waves in a Container of Liquid', id: 'chyp4y99', tags: 'waves' },
  { name: 'Huygens Principle of Wavelets', id: 'S5h6EVBJ', tags: 'waves' },
  { name: 'Huygens Reflection', id: 'BqXTsyXK', tags: 'waves' },
  { name: 'Fourier Series Square Waves', id: 'juzs5gxf', tags: 'waves' },
  { name: 'Fourier Transform Graph', id: 'aenhzjpz', tags: 'waves' },

  // â”€â”€ Waves â€” Electromagnetic (new) â”€â”€
  { name: 'Electromagnetic Waves Vary Amplitude', id: 'fmk46vcw', tags: 'waves electromagnetic' },
  { name: 'Electromagnetic Waves Equation', id: 'SdNMfHrt', tags: 'waves electromagnetic' },
  { name: 'Amplitude and Frequency Modulation', id: 'WAby9sC8', tags: 'waves electromagnetic' },
  { name: 'Binary Digital FM', id: 'K3zfr6qH', tags: 'waves electromagnetic' },
  { name: 'Overlayed FM Frequency Deviation', id: 'ct8ghwk9', tags: 'waves electromagnetic' },
  { name: 'Analog-to-Digital Sampling Animation', id: 'Hcy2rAuN', tags: 'waves electromagnetic' },

  // â”€â”€ Waves â€” Doppler (new) â”€â”€
  { name: 'Doppler Effect Static', id: 'MhXH3vcu', tags: 'waves doppler' },
  { name: 'Frequency-Position Doppler Graph', id: 'aSDNfNFp', tags: 'waves doppler' },

  // â”€â”€ Waves â€” Polarisation (new) â”€â”€
  { name: 'Polarization Filters', id: 'E6jZ52vK', tags: 'waves polarisation' },

  // â”€â”€ Waves â€” Refraction (new) â”€â”€
  { name: 'Huygens Refraction', id: 'uPtecKsy', tags: 'waves refraction' },
  { name: 'Wave Crossing Boundaries Refraction', id: 'uKrm9Rab', tags: 'waves refraction' },

  // â”€â”€ Waves â€” Standing Waves (new) â”€â”€
  { name: 'Phase Difference on Stationary Waves', id: 'xm5mnfyq', tags: 'waves superposition' },
  { name: 'Progressive vs Standing Longitudinal Wave', id: 'zsESysFA', tags: 'waves superposition' },
  { name: 'Standing Wave Transverse Longitudinal Pressure', id: 'EJ8USu9q', tags: 'waves superposition' },
  { name: 'Standing Waves on String Animated', id: 'qYX5eakP', tags: 'waves superposition' },
  { name: 'Standing Wave in Air Columns', id: 'qc7nMkww', tags: 'waves superposition' },
  { name: 'Standing Wave Open Pipe Harmonics Animated', id: 'zesBvfdY', tags: 'waves superposition' },
  { name: 'Standing Wave Closed-Open Pipe Harmonics', id: 'mGtpHehr', tags: 'waves superposition' },
  { name: 'Vary Length Open-Closed Pipe', id: 'gm9k6hkg', tags: 'waves superposition' },
  { name: 'Vary Length Open-Open Pipe', id: 'tsufws72', tags: 'waves superposition' },
  { name: 'Standing Wave Displacement and Pressure Graph', id: 'xbknrstt', tags: 'waves superposition' },
  { name: 'Standing Sound Waves Animation', id: 'pEQMcXCr', tags: 'waves superposition' },
  { name: '1D Wave Pulse Interference', id: 'dJrTcxYd', tags: 'waves superposition' },
  { name: '1D Wave Interference Vary Frequency', id: 'zMQw6nue', tags: 'waves interference' },

  // â”€â”€ Waves â€” Diffraction & Interference (new) â”€â”€
  { name: 'Double Slit Phase Difference', id: 'w4xBU2FZ', tags: 'waves diffraction' },
  { name: 'Double Slit Path Difference Calculations', id: 'G7Yrkr8Z', tags: 'waves diffraction' },
  { name: 'Double Slit Path Difference Change Multiple Lambda', id: 'jkqmuvne', tags: 'waves diffraction' },
  { name: 'Double Slit Small Angle Approximation', id: 'nSaqKUPc', tags: 'waves diffraction' },
  { name: 'Double Slit Fringe Location', id: 'MkY5sh44', tags: 'waves diffraction' },
  { name: 'Double Slit 2D Interference Basic', id: 'Tm7x7hhp', tags: 'waves interference' },
  { name: 'Double Slit 2D Interference Full Variables', id: 'gH9M8w2P', tags: 'waves interference' },
  { name: 'Laser Interferometer', id: 'Htzxnm6r', tags: 'waves interference' },
  { name: 'Single Slit Top View Huygens', id: 't55SAJVR', tags: 'waves diffraction' },
  { name: 'Diffraction Grating Laser 3D', id: 'myyuuhbg', tags: 'waves diffraction' },
  { name: 'Diffraction Grating Patterns Fringe', id: 'p5m34MKj', tags: 'waves diffraction' },
  { name: 'Single Slit Diffraction Multiple Sources', id: 'Jd2VfGCH', tags: 'waves diffraction' },
  { name: 'Double Slit Diffraction Grating Patterns', id: 'NcnT6MK9', tags: 'waves diffraction' },

  // â”€â”€ Waves â€” Thin Film Interference (new) â”€â”€
  { name: 'Thin Film Multiple Reflections', id: 'Z993C6QS', tags: 'waves interference' },
  { name: 'Thin Film Interference 1', id: 'r6Xruz49', tags: 'waves interference' },
  { name: 'Thin Film Interference 2', id: 'AaXxWvwu', tags: 'waves interference' },
  { name: 'Thin Film Interference Calculations', id: 'Sjv3g6C2', tags: 'waves interference' },

  // â”€â”€ Electric Fields (new) â”€â”€
  { name: 'Uniform Electric Field', id: 'rzspyvpy', tags: 'electric fields' },
  { name: 'Projectiles in Electric Field Deflection', id: 'pCPnUzUQ', tags: 'electric fields' },
  { name: 'Oil Drop Equilibrium Experiment', id: 'JUjVkmjK', tags: 'electric fields quantum physics' },
  { name: 'Electric Potential and Force Graphs', id: 'bPexk3Uw', tags: 'electric fields' },
  { name: '3D Potential Surface Free Rotation', id: 'MCypqnq3', tags: 'electric fields' },
  { name: '3D Potential Surface Auto-Rotate', id: 'khVy6MZa', tags: 'electric fields' },
  { name: 'Two Charged Spherical Shells V Graph', id: 'rkcmcheb', tags: 'electric fields' },

  // â”€â”€ Capacitance (new) â”€â”€
  { name: 'Parallel Plate Capacitor E-field', id: 'P9THhRfY', tags: 'capacitance electric fields' },
  { name: 'Simple RC Circuit Charging', id: 'X4AVQ2Us', tags: 'capacitance' },
  { name: 'Charging and Discharging Capacitor', id: 'jF4CZMAZ', tags: 'capacitance' },

  // â”€â”€ Electricity & Circuits (new) â”€â”€
  { name: 'Circuit Potential Energy Visualization', id: 'xeAMdVQp', tags: 'electricity circuits' },
  { name: 'Resistor I-V Graph', id: 'zpZREWcS', tags: 'electricity circuits' },
  { name: 'Parallel Circuit Current and Voltage', id: 'pHHxZrAf', tags: 'electricity circuits' },
  { name: 'Series Circuit Current and Voltage', id: 'BZCC4nkW', tags: 'electricity circuits' },
  { name: 'Maximum Power Theorem and Graph', id: 'hscshcj8', tags: 'electricity circuits' },
  { name: 'Internal Resistance Graph', id: 'UP4zF7qR', tags: 'electricity circuits' },
  { name: 'Potentiometer Circuit', id: 'pzy3qua8', tags: 'electricity circuits' },
  { name: 'Half-Wave Rectification Circuit Graphs', id: 'hnf5zbpj', tags: 'electricity circuits' },

  // â”€â”€ Magnetic Fields (new) â”€â”€
  { name: 'Force Between Two Equal Current Wires', id: 'hxPKcVSb', tags: 'magnetic fields' },
  { name: 'Force Between Two Unequal Current Wires', id: 'JSrCbknr', tags: 'magnetic fields' },
  { name: 'Charged Particles in a Magnetic Field', id: 'dFQG5amD', tags: 'magnetic fields' },
  { name: 'Charged Particle in Magnetic Field Spiral 3D', id: 'qajRP2O4', tags: 'magnetic fields' },
  { name: 'Hall Effect', id: 'MjNK8MP4', tags: 'magnetic fields' },
  { name: 'Sliding Wire Rail Gun', id: 'gBDr859x', tags: 'magnetic fields electromagnetic induction' },
  { name: 'Transmission of Electrical Power', id: 'DU6nNR2V', tags: 'magnetic fields' },
  { name: 'DC Motor Basics', id: 'PN2YrxBb', tags: 'magnetic fields' },
  { name: 'AC Generator 3D', id: 'gpjfkhzw', tags: 'magnetic fields electromagnetic induction' },

  // â”€â”€ Circular Motion (new) â”€â”€
  { name: 'Kinematics of Uniform Circular Motion', id: 'WBuX8YqT', tags: 'circular motion' },
  { name: 'Angular Displacement', id: 'x7dmuarh', tags: 'circular motion' },
  { name: 'Horizontal Car Friction', id: 'SQNtuDDj', tags: 'circular motion' },
  { name: 'Person on Horizontal Rotating Platform', id: 'ywUp7P9P', tags: 'circular motion' },
  { name: 'Rotating Earth About Axis', id: 'vkqwYHjj', tags: 'circular motion' },
  { name: 'Conical Pendulum 2D', id: 'pT7sgH5B', tags: 'circular motion' },
  { name: 'Conical Pendulum 3D', id: 'zdd3qbkm', tags: 'circular motion' },
  { name: 'Conical Pendulum Spinning Stopper', id: 'qC3Adyr8', tags: 'circular motion' },
  { name: 'Vertical Circle Yo-yo Constant Speed', id: 'qneBmSxr', tags: 'circular motion' },
  { name: 'Vertical Circles Full', id: 'KTAgQ4kF', tags: 'circular motion' },
  { name: 'Vertical Circle Contact Force', id: 'm28vcnbz', tags: 'circular motion' },
  { name: 'Rolling or Slipping Wheel', id: 'xapu7tz2', tags: 'mechanics rotational' },

  // â”€â”€ Gravitational Fields (new) â”€â”€
  { name: 'Force of Gravity Two Objects', id: 'cwttNHQ3', tags: 'gravitational fields' },
  { name: 'Gravitational Field Lines', id: 'wyVkQa23', tags: 'gravitational fields' },
  { name: 'Test Mass in G-Field', id: 'dafww6rp', tags: 'gravitational fields' },
  { name: 'G-field Graph Two Objects', id: 'yfhyxdm4', tags: 'gravitational fields' },
  { name: 'Gravitational Potential Graph Two Planets', id: 'ycuqv3wz', tags: 'gravitational fields' },
  { name: 'Comparing Satellite Orbital Speed', id: 'ur2vjDQF', tags: 'gravitational fields orbits' },
  { name: 'Orbital Velocity Basics', id: 'MDnrKMf6', tags: 'gravitational fields orbits' },
  { name: 'Orbit Velocity vs Radius Around Black Hole', id: 'TGQnAjGg', tags: 'gravitational fields orbits' },
  { name: 'Find the Black Hole Game', id: 'AhrxawdP', tags: 'gravitational fields' },
  { name: 'Acceleration of Gravity (alt)', id: 'yv2C4XdP', tags: 'gravitational fields' },
  { name: 'Acceleration of Gravity on Planets (alt)', id: 'EfBMY4UE', tags: 'gravitational fields' },
  { name: 'Satellite in Orbit Energy Graphs', id: 'jmqytcsc', tags: 'gravitational fields orbits' },
  { name: 'Orbital Motion Energy with KE and GE Graphs', id: 'pymub7nq', tags: 'gravitational fields orbits' },

  // â”€â”€ Thermal Physics (new) â”€â”€
  { name: 'Celsius to Fahrenheit Conversion', id: 'dye7f4kf', tags: 'thermal physics' },
  { name: 'Thermometer Calibration Fixed Points', id: 'KSYSMasd', tags: 'thermal physics' },
  { name: 'Heat Capacity and Phase Change', id: 'eD6nnXA7', tags: 'thermal physics' },
  { name: 'Specific Heat Capacity of Metal Block', id: 'P8Gj2RNF', tags: 'thermal physics' },
  { name: 'Ideal Gas Law Graphs', id: 'YzwWBYP3', tags: 'thermal physics ideal gases' },
  { name: 'Deriving Pressure from Ideal Gas', id: 'Vg4pTrrA', tags: 'thermal physics kinetic theory' },
  { name: 'PV Graphs', id: 'kx7U7Kr9', tags: 'thermal physics ideal gases' },
  { name: 'PV Graphs 3 Lab Situations', id: 'gSh2hm2h', tags: 'thermal physics ideal gases' },
  { name: 'Adiabatic Transforms Graph', id: 'RMFmkK2A', tags: 'thermal physics' },
  { name: 'Isobaric Transforms Graph', id: 'DYDvqQk9', tags: 'thermal physics' },
  { name: 'Isothermal Transforms Graph', id: 'CUmVA66V', tags: 'thermal physics' },
  { name: 'Isochoric Transforms Graph', id: 'pJ3ePZzf', tags: 'thermal physics' },
  { name: 'All Thermodynamic Processes', id: 'uew8B9rT', tags: 'thermal physics' },
  { name: 'Carnot Cycle', id: 'dW93FqWd', tags: 'thermal physics' },
  { name: 'Cyclic Process', id: 'wAdvWJwM', tags: 'thermal physics' },

  // â”€â”€ SHM & Oscillations (new) â”€â”€
  { name: 'Pendulum SHM', id: 'Jz2AvTjP', tags: 'SHM oscillations' },
  { name: 'Pendulum SHM with Graph', id: 'AkEDFDZ7', tags: 'SHM oscillations' },
  { name: 'Circular Motion to SHM Trigo Graph', id: 'aCduUPv4', tags: 'SHM oscillations' },
  { name: 'Spring SHM Force and Acceleration', id: 'cbDueVGA', tags: 'SHM oscillations' },
  { name: 'Derivation of Sine and Cosine Graphs', id: 'vxxw7hfp', tags: 'SHM oscillations' },
  { name: 'Average vs Instantaneous Velocity Derivatives', id: 'rafyjqpr', tags: 'SHM oscillations' },
  { name: 'All SHM Kinematics Graphs', id: 'xwcfqwya', tags: 'SHM oscillations' },
  { name: 'SHM Energy KE PE Graph', id: 'bjpSQ6Q5', tags: 'SHM oscillations' },
  { name: 'Spring SHM Work Done by Friction', id: 'XJyycUym', tags: 'SHM oscillations' },
  { name: 'Damped Harmonic Motion', id: 'ZMjkkEwU', tags: 'SHM oscillations' },
  { name: 'Resonance Curve with Displacement', id: 'HMu9ZwnS', tags: 'SHM resonance' },
  { name: 'RLC Circuit Oscillation', id: 'uWJTQjsP', tags: 'SHM oscillations capacitance magnetic fields' },
  { name: 'Oscillation Graphs Quiz', id: 'fK8Z7T76', tags: 'SHM oscillations' },
  { name: 'Spring Energy SHM', id: 'mRceWEDx', tags: 'SHM oscillations' },

  // â”€â”€ Quantum Physics (new) â”€â”€
  { name: 'Energy of Visible Light', id: 'X4xhAkgq', tags: 'quantum physics' },
  { name: 'Photo Electric Effect', id: 'CNjjqZq9', tags: 'quantum physics' },
  { name: 'Energy Level Diagrams', id: 'XY2K8htr', tags: 'quantum physics' },
  { name: 'Hydrogen Energy Level Diagrams', id: 'WrW6PWYR', tags: 'quantum physics' },
  { name: 'Photon Absorption and Ionization Energy Levels', id: 'wFTR6bdz', tags: 'quantum physics' },

  // â”€â”€ Nuclear Physics (new) â”€â”€
  { name: 'The Standard Model', id: 'Nq8KAXUX', tags: 'nuclear physics' },
  { name: 'Alpha Decay Energy Calculation', id: 'cp5MMTZc', tags: 'nuclear physics' },
  { name: 'Energy in Alpha Decay', id: 'pzRmc22H', tags: 'nuclear physics' },
  { name: 'Feynman Diagram Annihilation', id: 'eryu5tS4', tags: 'nuclear physics' },
  { name: 'Feynman Diagram 2 Vertices', id: 'xw7QHNeA', tags: 'nuclear physics' },
  { name: 'Half-Life Graph', id: 'Ym5NQWJp', tags: 'nuclear physics' },

  // â”€â”€ Medical Physics â€” Ultrasound (new) â”€â”€
  { name: 'Ultrasound A Scan', id: 'SrpZwGxQ', tags: 'medical physics ultrasound' },
  { name: 'Ultrasound B Scan', id: 'pak8vu2W', tags: 'medical physics ultrasound' },
  { name: 'Ultrasound Pulse Separation', id: 'gXaPPBBD', tags: 'medical physics ultrasound' },
  { name: 'Ultrasound Pulse Length', id: 'nMVjqTEU', tags: 'medical physics ultrasound' },
  { name: 'Aperture and Beam Collimation', id: 'WEMWsPaa', tags: 'medical physics ultrasound' },

  // â”€â”€ Medical Physics â€” NMR / MRI (new) â”€â”€
  { name: 'NMR 1 Receiver Signal', id: 'hMSwKsWg', tags: 'medical physics MRI' },
  { name: 'NMR 2 Receiver Signal', id: 'AGMWrpzt', tags: 'medical physics MRI' },
  { name: 'NMR 3 Receiver Signal', id: 'PfavCrSP', tags: 'medical physics MRI' },
  { name: 'NMR 4', id: 'xaHjwmrZ', tags: 'medical physics MRI' },
  { name: 'NMR 5', id: 'PQ88bRgj', tags: 'medical physics MRI' },

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // NEW: From physicstjc.github.io (140 additional applets)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  { name: 'Using a Vernier Scale (TJC)', id: 'PxFdhgEk', tags: 'practical skills measurements' },
  { name: 'Vernier Calipers (TJC)', id: 'csqf7b8m', tags: 'practical skills measurements' },
  { name: 'Vernier Calipers with Zero Error (TJC)', id: 'jybrnwgp', tags: 'practical skills measurements' },
  { name: 'Micrometer with Zero Error (TJC)', id: 'qedrwymk', tags: 'practical skills measurements' },
  { name: 'Standard Form and Prefixes (TJC)', id: 'qxjun83v', tags: 'practical skills measurements' },
  { name: 'Accuracy and Precision', id: 'JPWSCM3W', tags: 'practical skills measurements' },
  { name: 'Vector Addition', id: 'FCknj7c3', tags: 'mechanics vectors' },
  { name: 'Relative Velocity Boat River', id: 'jgA3FrVk', tags: 'mechanics kinematics' },
  { name: 'Vector Addition 2D', id: 'p2yvdsvs', tags: 'mechanics vectors' },
  { name: 'Relative Velocity', id: 'b9ehq8ua', tags: 'mechanics kinematics' },
  { name: 'Resolution of Vectors', id: 'j63uznk7', tags: 'mechanics vectors' },
  { name: 'Acceleration Interaction Animation', id: 'UDUdnA32', tags: 'mechanics kinematics' },
  { name: 'Vertical Throw', id: 'zvsydy9f', tags: 'mechanics kinematics' },
  { name: 'Equations of Motion SUVAT', id: 'mfvvhjrj', tags: 'mechanics kinematics' },
  { name: 'Bouncing Ball (TJC)', id: 'dfb53dps', tags: 'mechanics kinematics' },
  { name: 'Graphs of Motion (TJC)', id: 'tsn4x2jp', tags: 'mechanics kinematics' },
  { name: 'Motion Straight Line with Velocity', id: 'vhgwfrkj', tags: 'mechanics kinematics' },
  { name: 'Projectile Motion (TJC)', id: 'BXBMnZPS', tags: 'mechanics projectiles' },
  { name: 'Kinematics of Rectilinear Motion', id: 'mW8xdnQf', tags: 'mechanics kinematics' },
  { name: 'Velocity and Displacement Graphs', id: 'a5nzhx4r', tags: 'mechanics kinematics' },
  { name: 'Acceleration and Velocity Graphs (TJC)', id: 'ynwtuvf5', tags: 'mechanics kinematics' },
  { name: 'Parachute V3', id: 'wytxsyrd', tags: 'mechanics forces terminal velocity' },
  { name: 'Change in Velocity (TJC)', id: 'vb2fcque', tags: 'mechanics kinematics' },
  { name: 'Displacement-Time Graph (TJC)', id: 'rxpukb8d', tags: 'mechanics kinematics' },
  { name: 'Parachute Applet', id: 'wavar9bx', tags: 'mechanics forces terminal velocity' },
  { name: 'Resultant Force on Point Mass', id: 'u2cgrc5q', tags: 'mechanics forces' },
  { name: 'Forces in Equilibrium', id: 'ac6cjzfe', tags: 'mechanics forces' },
  { name: 'Forces on Box on Slope', id: 'pkpukanq', tags: 'mechanics forces' },
  { name: 'Dynamics Problem', id: 'kbkabucg', tags: 'mechanics forces' },
  { name: 'Inclined Plane Two Masses Pulley', id: 'MQpSdK2A', tags: 'mechanics forces' },
  { name: 'Two Mass Problem', id: 'fh5pwc37', tags: 'mechanics forces' },
  { name: 'Inclined Plane Friction Pulley', id: 'kZ4H4C7v', tags: 'mechanics forces' },
  { name: 'Friction Pulling Box Horizontal', id: 'ynATf9QU', tags: 'mechanics forces' },
  { name: 'Coplanar Concurrent Forces', id: 'vw8grewc', tags: 'mechanics forces' },
  { name: 'Elastic Inelastic Collisions', id: 'n3X5njnT', tags: 'mechanics momentum' },
  { name: 'Moments', id: 'Qnb2Tzcc', tags: 'mechanics forces moments' },
  { name: 'Calculating Moment of a Force', id: 'qzyczffy', tags: 'mechanics forces moments' },
  { name: 'Equilibrium of a Wall Shelf (TJC)', id: 'fysec9eh', tags: 'mechanics forces moments' },
  { name: 'Girl on Suspended Plank', id: 'ndjxzry9', tags: 'mechanics forces moments' },
  { name: 'Torque of a Couple', id: 'prmucjp6', tags: 'mechanics forces moments' },
  { name: 'Turning Effect on Tilted Beam', id: 'sas5ybxu', tags: 'mechanics forces moments' },
  { name: 'Mass Volume and Density', id: 'Pw89jUe2', tags: 'mechanics fluids' },
  { name: 'Buoyancy', id: 'uM5fD5KD', tags: 'mechanics fluids' },
  { name: 'Upthrust', id: 'qvsp9ny9', tags: 'mechanics fluids' },
  { name: 'Pressure in U Tube (TJC)', id: 'SD6m3YHr', tags: 'mechanics fluids pressure' },
  { name: 'Pascals Principle Hydraulic Lift', id: 'yb42hP5D', tags: 'mechanics fluids pressure' },
  { name: 'Hydraulic Press', id: 'egyer7nk', tags: 'mechanics fluids pressure' },
  { name: 'U Tube Manometer', id: 'qyuncz3h', tags: 'mechanics fluids pressure' },
  { name: 'Work Done', id: 'mpgu7qa3', tags: 'mechanics energy' },
  { name: 'LOL Energy Diagram Template', id: 'u2m3gnzj', tags: 'mechanics energy' },
  { name: 'Conservation of Energy Vertical Spring', id: 'TxXK2dnq', tags: 'mechanics energy SHM' },
  { name: 'Work Done (TJC alt)', id: 'zhjhx9d9', tags: 'mechanics energy' },
  { name: 'Work Done with Initial Velocity', id: 'vgqsdsqz', tags: 'mechanics energy' },
  { name: 'Bungee Jumping Energy Conservation', id: 'aBRsx86n', tags: 'mechanics energy' },
  { name: 'Angular Velocity', id: 'zfw87g5b', tags: 'circular motion' },
  { name: 'Uniform Circular Motion', id: 'rjza5pwy', tags: 'circular motion' },
  { name: 'Aircraft in Circular Motion', id: 'jxee2cwd', tags: 'circular motion' },
  { name: 'Vertical Non-uniform Circular Motion', id: 'ny3jhhsp', tags: 'circular motion' },
  { name: 'Centripetal Acceleration', id: 'rnkrmcx8', tags: 'circular motion' },
  { name: 'Circular Motion Variable Tension', id: 's4fpkqz2', tags: 'circular motion' },
  { name: 'Gravitational Potential Between Two Planets', id: 'hzfyjejx', tags: 'gravitational fields' },
  { name: 'Escape Velocity (TJC)', id: 'va3dbqyd', tags: 'gravitational fields' },
  { name: 'Pluto and Charon Orbit', id: 'angpz9uu', tags: 'gravitational fields orbits' },
  { name: 'Heating a Metal Model', id: 'QDdSsy8t', tags: 'thermal physics' },
  { name: 'First Law of Thermodynamics', id: 'yu2mkfxs', tags: 'thermal physics' },
  { name: 'PV Diagram Ideal Gas', id: 'xyqhfvyw', tags: 'thermal physics ideal gases' },
  { name: 'Idealized Stirling Cycle', id: 'pbnw2yas', tags: 'thermal physics' },
  { name: 'SHM Mass-Spring System', id: 'aebg46df', tags: 'SHM oscillations' },
  { name: 'Velocity vs Displacement SHM', id: 'xwx3skfd', tags: 'SHM oscillations' },
  { name: 'Box Losing Contact with Spring', id: 'ev62ku7w', tags: 'SHM oscillations' },
  { name: 'Resonance with Masses on Springs', id: 'JCyp4bYH', tags: 'SHM resonance' },
  { name: 'Acceleration-Time Graph SHM', id: 'vrqf9hyj', tags: 'SHM oscillations' },
  { name: 'Oscillations Overview', id: 'CdBu65h4', tags: 'SHM oscillations' },
  { name: 'SHM Graphs with Energy', id: 'h7jzv58z', tags: 'SHM oscillations' },
  { name: 'SHM in 3D', id: 'tsz95u6p', tags: 'SHM oscillations' },
  { name: 'Torsional Pendulum', id: 'jhc4xvpe', tags: 'SHM oscillations' },
  { name: 'Linear Wavefront', id: 'kmzaends', tags: 'waves' },
  { name: 'Circular Wavefronts', id: 'gwffcn7c', tags: 'waves' },
  { name: 'Graph of Longitudinal Wave', id: 'kq3e2qjk', tags: 'waves' },
  { name: 'Phase Difference Two Particles on Wave', id: 'kmpdntk6', tags: 'waves' },
  { name: 'Polarisation Malus Law', id: 'x5w3XjJs', tags: 'waves polarisation' },
  { name: 'Amplitude After Linear Polarisation', id: 'nxqRUBJm', tags: 'waves polarisation' },
  { name: 'Electromagnetic Waves Spectrum', id: 'xhYwXSsH', tags: 'waves electromagnetic' },
  { name: 'Frequency and Amplitude of Sound', id: 'cnba7x4g', tags: 'waves sound' },
  { name: 'Sound Wave Displacement and Pressure', id: 'dfh2jjxy', tags: 'waves sound' },
  { name: 'Conditions for Stationary Waves', id: 'wse5hvmj', tags: 'waves superposition' },
  { name: 'Phase Difference Stationary Wave Fixed', id: 'zg4spztb', tags: 'waves superposition' },
  { name: 'Resonant Frequency Standing Waves String', id: 'bpnejfsv', tags: 'waves superposition' },
  { name: 'Single Slit Diffraction Intensity', id: 'g6m4dh9s', tags: 'waves diffraction' },
  { name: 'Two Source Path Difference', id: 'ayECjetm', tags: 'waves interference' },
  { name: 'Double Slit Interference (TJC)', id: 'nxkcffkd', tags: 'waves interference' },
  { name: 'Wave Interference in 3D', id: 'XdW2SjQ8', tags: 'waves interference' },
  { name: 'Resolution Rayleigh Criterion', id: 'er2sravh', tags: 'waves diffraction' },
  { name: 'Wave Interference', id: 'dnbpbvz7', tags: 'waves interference' },
  { name: 'Reflection from Plane Mirror', id: 'gzPUZMBb', tags: 'waves refraction' },
  { name: 'Snells Law', id: 'KUchQNVQ', tags: 'waves refraction' },
  { name: 'Ray Diagram Converging Lens', id: 'J8Xv8ZB3', tags: 'waves lenses' },
  { name: 'Optics of the Human Eye', id: 'ux9ke25p', tags: 'medical physics lenses' },
  { name: 'Converging Lens', id: 'pfncxexz', tags: 'waves lenses' },
  { name: 'Concave Mirror', id: 'Dk34GZUA', tags: 'waves mirrors' },
  { name: 'Apparent Depth V1', id: 'uubqucvj', tags: 'waves refraction' },
  { name: 'Thin Converging Lens Movable', id: 'dp6tastr', tags: 'waves lenses' },
  { name: 'Critical Angle Total Internal Reflection', id: 'DHmnJnHh', tags: 'waves refraction' },
  { name: 'Reflection and Refraction', id: 'tvstqv47', tags: 'waves refraction' },
  { name: 'Where is the Fish Refraction', id: 'kdszgpfg', tags: 'waves refraction' },
  { name: 'Apparent Depth V2', id: 'hu3pcnex', tags: 'waves refraction' },
  { name: 'Refraction Self-Test', id: 'fhmmuhbg', tags: 'waves refraction' },
  { name: 'Electric Potential Multiple Charges', id: 'zpdbqgKy', tags: 'electric fields' },
  { name: 'Charged Particle in Electric Field', id: 'R6UGrg6n', tags: 'electric fields' },
  { name: 'Electrostatic Forces Two Charges on Third', id: 'RgQdcNuD', tags: 'electric fields' },
  { name: 'Potential of Two Point Charges', id: 'z8cr66wb', tags: 'electric fields' },
  { name: 'I-V Characteristics Resistor', id: 'K2gh8kfM', tags: 'electricity circuits' },
  { name: 'Voltmeter', id: 'watavkq8', tags: 'electricity circuits' },
  { name: 'Four Identical Bulbs Circuit', id: 'DySEJY3w', tags: 'electricity circuits' },
  { name: 'Electric Circuits Interactive', id: 'etszj23m', tags: 'electricity circuits' },
  { name: 'Resistors in Circuits', id: 'jYwhbaN6', tags: 'electricity circuits' },
  { name: 'Internal Resistance (TJC)', id: 'puvfjxk5', tags: 'electricity circuits' },
  { name: 'Practical Electricity', id: 'pmatpapk', tags: 'electricity circuits' },
  { name: 'Compound Circuits', id: 'jkckp9pr', tags: 'electricity circuits' },
  { name: 'RC Circuit', id: 'rFEV4HJx', tags: 'electricity capacitance' },
  { name: 'RMS Current Sinusoidal', id: 'btx3uzec', tags: 'electricity circuits' },
  { name: 'RMS Rectified Current', id: 'pmdfkamh', tags: 'electricity circuits' },
  { name: 'AC Power', id: 'xmta8sud', tags: 'electricity circuits' },
  { name: 'Root Mean Square', id: 'tdxdmfzf', tags: 'electricity circuits' },
  { name: '3D Magnetic Field from Magnet', id: 'g9DXB8AD', tags: 'magnetic fields' },
  { name: 'B Field Around a Wire', id: 'Xr65rR3b', tags: 'magnetic fields' },
  { name: 'Flemings Left Hand Rule', id: 'h3kxv53w', tags: 'magnetic fields' },
  { name: 'Flemings Left Hand Rule (alt)', id: 'jax9jwxc', tags: 'magnetic fields' },
  { name: 'DC Motor 2D', id: 'bqpjbrnw', tags: 'magnetic fields' },
  { name: 'DC Motor 3D', id: 'wcmvnj86', tags: 'magnetic fields' },
  { name: '3D Force on Current in Magnetic Field', id: 'egdpjrpc', tags: 'magnetic fields' },
  { name: 'Charged Particles in Magnetic Field (TJC)', id: 'mkem6b9y', tags: 'magnetic fields' },
  { name: 'Charged Particles in Parallel E and B Fields', id: 'erehat7n', tags: 'magnetic fields electric fields' },
  { name: 'Helical Movement in B Field', id: 'gg6zhevd', tags: 'magnetic fields' },
  { name: 'Magnetic Induction', id: 'JPFxyhtA', tags: 'magnetic fields electromagnetic induction' },
  { name: '3D Rotating Coil', id: 'QJdqdmbR', tags: 'magnetic fields electromagnetic induction' },
  { name: 'AC Transformer', id: 'tc7mxwgs', tags: 'magnetic fields electromagnetic induction' },
  { name: 'Photoelectric Effect (TJC)', id: 'c6ZmnCQD', tags: 'quantum physics' },
  { name: 'Hydrogen Atom Electron Energy Levels', id: 'awfut3uv', tags: 'quantum physics' },
];

const PHET_SIMS = [
  { name: 'Projectile Motion',      slug: 'projectile-motion' },
  { name: 'Wave on a String',       slug: 'wave-on-a-string' },
  { name: 'Circuit Construction',   slug: 'circuit-construction-kit-dc' },
  { name: 'Gravity & Orbits',       slug: 'gravity-and-orbits' },
  { name: 'Charges & Fields',       slug: 'charges-and-fields' },
  { name: 'Energy Skate Park',      slug: 'energy-skate-park' },
  { name: 'Wave Interference',      slug: 'wave-interference' },
  { name: 'Quantum Tunnelling',     slug: 'quantum-tunneling' },
  { name: 'Nuclear Fission',        slug: 'nuclear-fission' },
  { name: 'Bending Light',          slug: 'bending-light' },
  { name: 'Faraday Law',            slug: 'faradays-law' },
  { name: 'Gas Properties',         slug: 'gas-properties' },
];

const EXTERNAL_SIMS = [
  // â”€â”€ Electricity â”€â”€
  { name: 'Drift Velocity of Electrons', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_17current/ejss_model_driftvelocity/driftvelocity_Simulation.xhtml', tags: 'electricity drift velocity', source: 'iwant2study' },
  { name: 'Half-Wave Rectification', url: 'https://www.falstad.com/circuit/e-rectify.html', tags: 'electricity circuits', source: 'falstad' },
  { name: 'Full-Wave Rectification', url: 'https://www.falstad.com/circuit/e-fullrect.html', tags: 'electricity circuits', source: 'falstad' },
  { name: 'Full-Wave Rectification + Smoothing', url: 'https://www.falstad.com/circuit/e-fullrectf.html', tags: 'electricity circuits', source: 'falstad' },
  { name: 'Op-Amp Comparator', url: 'https://www.falstad.com/circuit/e-opamp.html', tags: 'electricity circuits', source: 'falstad' },
  { name: 'Op-Amp Inverting Amplifier', url: 'https://www.falstad.com/circuit/e-amp-invert.html', tags: 'electricity circuits', source: 'falstad' },
  { name: 'Op-Amp Non-Inverting Amplifier', url: 'https://www.falstad.com/circuit/e-amp-noninvert.html', tags: 'electricity circuits', source: 'falstad' },
  { name: 'Potentiometer Ruler Lab', url: 'https://www.walter-fendt.de/html5/phen/potentiometer_en.htm', tags: 'electricity circuits', source: 'walter-fendt' },
  { name: 'AC Circuits Phase Relationships', url: 'https://www.walter-fendt.de/html5/phen/accircuits_en.htm', tags: 'electricity circuits', source: 'walter-fendt' },
  // â”€â”€ Magnetic Fields & EM Induction â”€â”€
  { name: 'B-field Around Two Wires', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_MagneticField2Wirewee4/MagneticField2Wirewee4_Simulation.xhtml', tags: 'magnetic fields', source: 'iwant2study' },
  { name: 'B-field of Wire Loops', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_MagneticFieldFromLoops/MagneticFieldFromLoops_Simulation.xhtml', tags: 'magnetic fields', source: 'iwant2study' },
  { name: 'B-field of Helmholtz Coils', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_mirrorfieldwee/mirrorfieldwee_Simulation.xhtml', tags: 'magnetic fields', source: 'iwant2study' },
  { name: 'Cyclotron Simulator', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_chargeinNScyclotronwee/chargeinNScyclotronwee_Simulation.xhtml', tags: 'magnetic fields', source: 'iwant2study' },
  { name: '3D Particle in E and B Fields', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_chargein3DEnBfield/chargein3DEnBfield_Simulation.xhtml', tags: 'magnetic fields electric fields', source: 'iwant2study' },
  { name: 'Mass Spectrometer', url: 'https://iwant2study.org/ospsg/index.php/interactive-resources/physics/05-electricity-and-magnetism/08-electromagnetism/566-massspectrometerv10', tags: 'magnetic fields nuclear physics', source: 'iwant2study' },
  { name: 'Faraday Rail Gun', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_MO_213S_FaradayExperiment/MO_213S_FaradayExperiment_Simulation.xhtml', tags: 'magnetic fields electromagnetic induction', source: 'iwant2study' },
  { name: 'Magnet Through Solenoid', url: 'https://iwant2study.org/lookangejss/05electricitynmagnetism_21electromagnetism/ejss_model_MO_221S_StationarySolenoidMovingMagnet_101210/MO_221S_StationarySolenoidMovingMagnet_101210_Simulation.xhtml', tags: 'magnetic fields electromagnetic induction', source: 'iwant2study' },
  { name: 'Two Magnets Falling in Copper Tube', url: 'https://iwant2study.org/ospsg/index.php/interactive-resources/physics/05-electricity-and-magnetism/08-electromagnetism/762-mo-235s-twomagnetsfallingincoppertube', tags: 'magnetic fields electromagnetic induction', source: 'iwant2study' },
  // â”€â”€ Gravitational Fields â”€â”€
  { name: 'Gravitational Potential and Acceleration', url: 'https://iwant2study.org/lookangejss/02_newtonianmechanics_7gravity/ejss_model_gravity06/gravity06_Simulation.xhtml', tags: 'gravitational fields', source: 'iwant2study' },
  // â”€â”€ Waves â”€â”€
  { name: 'Standing Wave Reflected', url: 'https://www.walter-fendt.de/html5/phen/standingwavereflection_en.htm', tags: 'waves superposition', source: 'walter-fendt' },
  // â”€â”€ Circular Motion â”€â”€
  { name: 'Carousel Pendulums', url: 'https://www.walter-fendt.de/html5/phen/carousel_en.htm', tags: 'circular motion', source: 'walter-fendt' },
  // â”€â”€ SHM & Oscillations â”€â”€
  { name: 'SHM Circular Motion Waves Link', url: 'https://ophysics.com/w0.html', tags: 'SHM oscillations waves', source: 'ophysics' },
  { name: 'Spring-Mass All Graphs', url: 'https://ophysics.com/w1.html', tags: 'SHM oscillations', source: 'ophysics' },
  { name: 'Dropping Mass on Oscillating Mass', url: 'https://ophysics.com/e5.html', tags: 'SHM oscillations', source: 'ophysics' },
  { name: 'Falling Spring Two Masses', url: 'https://ophysics.com/fs2.html', tags: 'SHM oscillations', source: 'ophysics' },
  { name: 'Oscillating RLC Circuit', url: 'https://www.walter-fendt.de/html5/phen/oscillatingcircuit_en.htm', tags: 'SHM oscillations capacitance', source: 'walter-fendt' },
  // â”€â”€ Nuclear Physics â”€â”€
  { name: 'Three-Stage Radioactive Decay', url: 'https://iwant2study.org/ospsg/index.php/interactive-resources/physics/06-quantum-physics/02-nuclear/316-decaychangenweethreestate', tags: 'nuclear physics', source: 'iwant2study' },
  { name: 'Radioactive Decay Law', url: 'https://www.walter-fendt.de/html5/phen/lawdecay_en.htm', tags: 'nuclear physics', source: 'walter-fendt' },
  // â”€â”€ Quantum Physics â”€â”€
  { name: 'Bohr Model of the Atom', url: 'https://www.walter-fendt.de/html5/phen/bohrmodel_en.htm', tags: 'quantum physics', source: 'walter-fendt' },
  // â”€â”€ Custom JS Sims from physicstjc.github.io â”€â”€
  { name: 'Kinematics Graphs Interactive', url: 'https://physicstjc.github.io/sls/kinematics-graph/index.html', tags: 'mechanics kinematics', source: 'physicstjc' },
  { name: 'Projectile Simulator', url: 'https://physicstjc.github.io/sls/projectile-simulator/index.html', tags: 'mechanics projectiles', source: 'physicstjc' },
  { name: 'System Schema FBD Builder', url: 'https://physicstjc.github.io/sls/system-schema/index.html', tags: 'mechanics forces', source: 'physicstjc' },
  { name: 'Bouncing Ball Energy', url: 'https://physicstjc.github.io/sls/bouncing-ball/index.html', tags: 'mechanics energy', source: 'physicstjc' },
  { name: 'Thermal Processes PV Diagram', url: 'https://physicstjc.github.io/sls/thermal-processes/index.html', tags: 'thermal physics', source: 'physicstjc' },
  { name: 'Brownian Motion', url: 'https://physicstjc.github.io/sls/brownian-motion/index.html', tags: 'thermal physics kinetic theory', source: 'physicstjc' },
  { name: 'Stationary Waves Formation', url: 'https://physicstjc.github.io/sls/stationary-waves/index.html', tags: 'waves superposition', source: 'physicstjc' },
  { name: 'Wave Motion Animation', url: 'https://physicstjc.github.io/sls/wave-motion/index.html', tags: 'waves', source: 'physicstjc' },
  { name: 'Electric Potential 2D', url: 'https://physicstjc.github.io/sls/electric-potential/index.html', tags: 'electric fields', source: 'physicstjc' },
  { name: 'Electric Field Simulation', url: 'https://physicstjc.github.io/sls/electric-field/', tags: 'electric fields', source: 'physicstjc' },
  { name: 'Radioactive Decay Sim', url: 'https://physicstjc.github.io/sls/radioactive-decay/index.html', tags: 'nuclear physics', source: 'physicstjc' },
  { name: 'Geiger-Muller Counter', url: 'https://physicstjc.github.io/sls/gm-counter/index.html', tags: 'nuclear physics', source: 'physicstjc' },
  { name: 'Nuclear Radiation Types', url: 'https://physicstjc.github.io/sls/3radiation/', tags: 'nuclear physics', source: 'physicstjc' },
  { name: 'Bohr Model of the Atom (TJC)', url: 'https://physicstjc.github.io/sls/bohr-model/index.html', tags: 'quantum physics', source: 'physicstjc' },
  { name: 'Faradays Experiment EM', url: 'https://physicstjc.github.io/sls/faraday-experiment/index.html', tags: 'magnetic fields electromagnetic induction', source: 'physicstjc' },
  { name: 'AC Generator (TJC)', url: 'https://physicstjc.github.io/sls/ac-generator/index.html', tags: 'magnetic fields electromagnetic induction', source: 'physicstjc' },
  { name: 'Lennard Jones Potential', url: 'https://physicstjc.github.io/sls/lennard-jones-potential/', tags: 'thermal physics', source: 'physicstjc' },
  { name: 'Ray Diagram of Lens', url: 'https://physicstjc.github.io/sls/lens-ray-diagram/', tags: 'waves lenses', source: 'physicstjc' },
  { name: 'Metal Lattice Resistance', url: 'https://physicstjc.github.io/sls/resistance-and-temperature/', tags: 'electricity circuits', source: 'physicstjc' },
  { name: 'Rheostat', url: 'https://physicstjc.github.io/sls/rheostat/', tags: 'electricity circuits', source: 'physicstjc' },
  { name: 'Capacitors in Combination', url: 'https://physicstjc.github.io/sls/capacitance/', tags: 'capacitance', source: 'physicstjc' },
  { name: 'Sound Level Meter', url: 'https://physicstjc.github.io/sls/sound-level-meter/', tags: 'waves sound', source: 'physicstjc' },
  { name: 'Sound Frequency Analyser', url: 'https://physicstjc.github.io/sls/sound-frequency-analyser/', tags: 'waves sound', source: 'physicstjc' },
  { name: 'Graph Plotter Tool', url: 'https://physicstjc.github.io/sls/graph-plotter/index.html', tags: 'practical skills measurements', source: 'physicstjc' },
  { name: 'Vector Scale Drawing App', url: 'https://physicstjc.github.io/sls/vector-drawing/', tags: 'mechanics vectors practical skills', source: 'physicstjc' },
];

// Board tag mapping: which tags are relevant to which exam boards
const TAG_TO_BOARDS = {
  'mechanics': 'AQA Edexcel OCR', 'kinematics': 'AQA Edexcel OCR', 'projectiles': 'AQA Edexcel OCR',
  'forces': 'AQA Edexcel OCR', 'moments': 'AQA Edexcel OCR', 'momentum': 'AQA Edexcel OCR',
  'energy': 'AQA Edexcel OCR', 'vectors': 'AQA Edexcel OCR', 'terminal velocity': 'AQA Edexcel OCR',
  'fluids': 'Edexcel', 'pressure': 'Edexcel', 'density': 'Edexcel',
  'rotational': 'AQA', 'materials': 'AQA Edexcel OCR', 'hookes law': 'AQA Edexcel OCR',
  'circular motion': 'AQA Edexcel OCR', 'SHM': 'AQA Edexcel OCR', 'oscillations': 'AQA Edexcel OCR',
  'resonance': 'AQA Edexcel OCR', 'waves': 'AQA Edexcel OCR', 'diffraction': 'AQA Edexcel OCR',
  'refraction': 'AQA Edexcel OCR', 'interference': 'AQA Edexcel OCR', 'superposition': 'AQA Edexcel OCR',
  'polarisation': 'AQA Edexcel OCR', 'doppler': 'AQA Edexcel', 'electromagnetic': 'AQA Edexcel OCR',
  'lenses': 'AQA', 'mirrors': 'AQA', 'telescopes': 'AQA', 'sound': 'AQA Edexcel OCR',
  'thermal physics': 'AQA Edexcel OCR', 'kinetic theory': 'AQA Edexcel OCR', 'ideal gases': 'AQA Edexcel OCR',
  'electric fields': 'AQA Edexcel OCR', 'capacitance': 'AQA Edexcel OCR',
  'magnetic fields': 'AQA Edexcel OCR', 'electromagnetic induction': 'AQA Edexcel OCR',
  'electricity': 'AQA Edexcel OCR', 'circuits': 'AQA Edexcel OCR', 'drift velocity': 'AQA Edexcel OCR',
  'quantum physics': 'AQA Edexcel OCR', 'nuclear physics': 'AQA Edexcel OCR',
  'gravitational fields': 'AQA Edexcel OCR', 'orbits': 'AQA Edexcel OCR',
  'astrophysics': 'AQA Edexcel', 'medical physics': 'AQA', 'ultrasound': 'AQA', 'MRI': 'AQA',
  'special relativity': 'AQA', 'practical skills': 'AQA Edexcel OCR', 'measurements': 'AQA Edexcel OCR',
};

function getBoards(tags) {
  if (!tags) return 'AQA Edexcel OCR';
  const boards = new Set();
  const t = tags.toLowerCase();
  for (const [tag, b] of Object.entries(TAG_TO_BOARDS)) {
    if (t.includes(tag.toLowerCase())) b.split(' ').forEach(x => boards.add(x));
  }
  return boards.size ? [...boards].join(' ') : 'AQA Edexcel OCR';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CIRCUIT COMPONENT DATA (IEC/BS standard symbols)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const CIRCUIT_COMPONENTS = [
  // â”€â”€ Sources â”€â”€
  { name: 'Cell', id: 'cell', category: 'Sources',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="32" y2="20" stroke="#fff" stroke-width="2"/><line x1="32" y1="6" x2="32" y2="34" stroke="#fff" stroke-width="2.5"/><line x1="40" y1="12" x2="40" y2="28" stroke="#fff" stroke-width="1.5"/><line x1="40" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
  { name: 'Battery', id: 'battery', category: 'Sources',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="20" y2="20" stroke="#fff" stroke-width="2"/><line x1="20" y1="6" x2="20" y2="34" stroke="#fff" stroke-width="2.5"/><line x1="27" y1="12" x2="27" y2="28" stroke="#fff" stroke-width="1.5"/><line x1="34" y1="6" x2="34" y2="34" stroke="#fff" stroke-width="2.5"/><line x1="41" y1="12" x2="41" y2="28" stroke="#fff" stroke-width="1.5"/><line x1="48" y1="6" x2="48" y2="34" stroke="#fff" stroke-width="2.5"/><line x1="55" y1="12" x2="55" y2="28" stroke="#fff" stroke-width="1.5"/><line x1="55" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
  { name: 'AC Source', id: 'ac-source', category: 'Sources',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><circle cx="40" cy="20" r="14" fill="none" stroke="#fff" stroke-width="2"/><path d="M33 20 Q36 12, 40 20 Q44 28, 47 20" fill="none" stroke="#fff" stroke-width="1.5"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },

  // â”€â”€ Resistive â”€â”€
  { name: 'Resistor', id: 'resistor', category: 'Resistive',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><rect x="22" y="10" width="36" height="20" rx="2" fill="none" stroke="#fff" stroke-width="2"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
  { name: 'Variable Resistor', id: 'variable-resistor', category: 'Resistive',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><rect x="22" y="10" width="36" height="20" rx="2" fill="none" stroke="#fff" stroke-width="2"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/><line x1="28" y1="34" x2="52" y2="6" stroke="#fff" stroke-width="1.5"/><polygon points="52,6 48,14 54,12" fill="#fff"/></svg>' },
  { name: 'LDR', id: 'ldr', category: 'Resistive',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><rect x="22" y="10" width="36" height="20" rx="2" fill="none" stroke="#fff" stroke-width="2"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/><line x1="18" y1="4" x2="26" y2="12" stroke="#fff" stroke-width="1.2"/><polygon points="26,12 22,8 24,14" fill="#fff"/><line x1="24" y1="4" x2="32" y2="12" stroke="#fff" stroke-width="1.2"/><polygon points="32,12 28,8 30,14" fill="#fff"/></svg>' },
  { name: 'Thermistor', id: 'thermistor', category: 'Resistive',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><rect x="22" y="10" width="36" height="20" rx="2" fill="none" stroke="#fff" stroke-width="2"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/><line x1="28" y1="30" x2="52" y2="10" stroke="#fff" stroke-width="1.5"/></svg>' },
  { name: 'Fuse', id: 'fuse', category: 'Resistive',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><rect x="22" y="14" width="36" height="12" rx="2" fill="none" stroke="#fff" stroke-width="2"/><line x1="22" y1="20" x2="58" y2="20" stroke="#fff" stroke-width="1"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },

  // â”€â”€ Reactive â”€â”€
  { name: 'Capacitor', id: 'capacitor', category: 'Reactive',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="35" y2="20" stroke="#fff" stroke-width="2"/><line x1="35" y1="6" x2="35" y2="34" stroke="#fff" stroke-width="2.5"/><line x1="45" y1="6" x2="45" y2="34" stroke="#fff" stroke-width="2.5"/><line x1="45" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },

  // â”€â”€ Output â”€â”€
  { name: 'Bulb / Lamp', id: 'bulb', category: 'Output',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><circle cx="40" cy="20" r="14" fill="none" stroke="#fff" stroke-width="2"/><line x1="30" y1="10" x2="50" y2="30" stroke="#fff" stroke-width="1.5"/><line x1="50" y1="10" x2="30" y2="30" stroke="#fff" stroke-width="1.5"/><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
  { name: 'LED', id: 'led', category: 'Output',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="28" y2="20" stroke="#fff" stroke-width="2"/><polygon points="28,10 28,30 48,20" fill="none" stroke="#fff" stroke-width="2"/><line x1="48" y1="10" x2="48" y2="30" stroke="#fff" stroke-width="2.5"/><line x1="48" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/><line x1="50" y1="8" x2="58" y2="2" stroke="#fff" stroke-width="1.2"/><polygon points="58,2 54,6 58,8" fill="#fff"/><line x1="54" y1="12" x2="62" y2="6" stroke="#fff" stroke-width="1.2"/><polygon points="62,6 58,10 62,12" fill="#fff"/></svg>' },

  // â”€â”€ Switching â”€â”€
  { name: 'Switch (open)', id: 'switch-open', category: 'Switching',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="26" y2="20" stroke="#fff" stroke-width="2"/><circle cx="28" cy="20" r="3" fill="#fff"/><line x1="28" y1="20" x2="52" y2="8" stroke="#fff" stroke-width="2"/><circle cx="54" cy="20" r="3" fill="#fff"/><line x1="56" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
  { name: 'Switch (closed)', id: 'switch-closed', category: 'Switching',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="26" y2="20" stroke="#fff" stroke-width="2"/><circle cx="28" cy="20" r="3" fill="#fff"/><line x1="28" y1="20" x2="54" y2="20" stroke="#fff" stroke-width="2"/><circle cx="54" cy="20" r="3" fill="#fff"/><line x1="56" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },

  // â”€â”€ Measurement â”€â”€
  { name: 'Ammeter', id: 'ammeter', category: 'Measurement',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><circle cx="40" cy="20" r="14" fill="none" stroke="#fff" stroke-width="2"/><text x="40" y="25" text-anchor="middle" fill="#fff" font-family="sans-serif" font-size="16" font-weight="bold">A</text><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
  { name: 'Voltmeter', id: 'voltmeter', category: 'Measurement',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="22" y2="20" stroke="#fff" stroke-width="2"/><circle cx="40" cy="20" r="14" fill="none" stroke="#fff" stroke-width="2"/><text x="40" y="25" text-anchor="middle" fill="#fff" font-family="sans-serif" font-size="16" font-weight="bold">V</text><line x1="58" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },

  // â”€â”€ Semiconductor â”€â”€
  { name: 'Diode', id: 'diode', category: 'Semiconductor',
    svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40"><line x1="0" y1="20" x2="28" y2="20" stroke="#fff" stroke-width="2"/><polygon points="28,10 28,30 48,20" fill="none" stroke="#fff" stroke-width="2"/><line x1="48" y1="10" x2="48" y2="30" stroke="#fff" stroke-width="2.5"/><line x1="48" y1="20" x2="80" y2="20" stroke="#fff" stroke-width="2"/></svg>' },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let selectedColour = '#343a40';
let editingItemId  = null;   // Miro item ID of equation being edited
let revealColour   = '#7C3AED';
let bgColour       = 'none'; // 'none' = transparent, or hex like '#ffffff'
let bgRadius       = 8;
let revealWidth    = 200;
let revealHeight   = 80;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function toast(msg, ms = 2200) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), ms);
}

function getLatex() {
  return document.getElementById('latex-input').value.trim();
}

function getFontSize() {
  return parseInt(document.getElementById('font-size').value);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PREVIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let previewTimer = null;

function updatePreview() {
  const latex   = getLatex();
  const preview = document.getElementById('latex-preview');
  if (!latex) {
    preview.innerHTML = '<span style="color:var(--muted);font-size:11px">Preview will appear here</span>';
    return;
  }
  try {
    const html = katex.renderToString(latex, { throwOnError: true, displayMode: true });
    // Apply selected colour via filter / SVG colour trick isn't needed for DOM rendering
    preview.innerHTML = `<div style="color:${selectedColour}">${html}</div>`;
  } catch(e) {
    preview.innerHTML = `<span class="error-msg">âš  ${e.message}</span>`;
  }
}

document.getElementById('latex-input').addEventListener('input', () => {
  clearTimeout(previewTimer);
  previewTimer = setTimeout(updatePreview, 200);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUICK LATEX TOOLBAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.querySelectorAll('#quick-latex button').forEach(btn => {
  btn.addEventListener('click', () => {
    const input = document.getElementById('latex-input');
    const start = input.selectionStart;
    const end = input.selectionEnd;
    const text = input.value;
    const snippet = btn.dataset.ins;

    // If there's selected text, wrap it (replace â–¢ with selection)
    const selected = text.substring(start, end);
    let insert, cursorPos;

    if (selected && snippet.includes('â–¢')) {
      // Replace first â–¢ with the selection
      insert = snippet.replace('â–¢', selected);
      cursorPos = start + insert.length;
    } else if (snippet.includes('â–¢')) {
      // Place cursor where first â–¢ is
      const placeholderIdx = snippet.indexOf('â–¢');
      insert = snippet.replace(/â–¢/g, '');
      cursorPos = start + placeholderIdx;
    } else {
      insert = snippet;
      cursorPos = start + insert.length;
    }

    input.value = text.substring(0, start) + insert + text.substring(end);
    input.focus();
    input.setSelectionRange(cursorPos, cursorPos);
    updatePreview();
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COLOUR PICKER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.querySelectorAll('.colour-swatch').forEach(swatch => {
  swatch.addEventListener('click', () => {
    document.querySelectorAll('.colour-swatch').forEach(s => s.classList.remove('selected'));
    swatch.classList.add('selected');
    selectedColour = swatch.dataset.colour;
    document.getElementById('custom-colour').value = selectedColour;
    updatePreview();
  });
});

document.getElementById('custom-colour').addEventListener('input', e => {
  selectedColour = e.target.value;
  document.querySelectorAll('.colour-swatch').forEach(s => s.classList.remove('selected'));
  updatePreview();
});

// Font size display
document.getElementById('font-size').addEventListener('input', e => {
  document.getElementById('size-val').textContent = e.target.value + 'px';
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TEXT COLOUR (wrap selected text in \textcolor)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.querySelectorAll('.text-colour-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const input = document.getElementById('latex-input');
    const start = input.selectionStart;
    const end = input.selectionEnd;
    if (start === end) { toast('Select some text first'); return; }

    const before = input.value.substring(0, start);
    const selected = input.value.substring(start, end);
    const after = input.value.substring(end);
    const colour = btn.dataset.tc;

    input.value = before + `\\textcolor{${colour}}{${selected}}` + after;
    // Place cursor after the inserted text
    const newPos = before.length + `\\textcolor{${colour}}{${selected}}`.length;
    input.setSelectionRange(newPos, newPos);
    input.focus();
    updatePreview();
  });
});

document.getElementById('btn-remove-colour').addEventListener('click', () => {
  const input = document.getElementById('latex-input');
  // Remove \textcolor{colour}{content} â€” handles nested braces via balanced matching
  input.value = input.value.replace(/\\textcolor\{[^}]*\}\{((?:[^{}]|\{[^{}]*\})*)\}/g, '$1');
  input.focus();
  updatePreview();
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BACKGROUND FILL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.querySelectorAll('.bg-swatch').forEach(swatch => {
  swatch.addEventListener('click', () => {
    document.querySelectorAll('.bg-swatch').forEach(s => s.classList.remove('selected'));
    swatch.classList.add('selected');
    bgColour = swatch.dataset.bg;
    document.getElementById('bg-label').textContent = bgColour === 'none' ? '(none)' : bgColour;
  });
});

document.getElementById('custom-bg').addEventListener('input', e => {
  bgColour = e.target.value;
  document.querySelectorAll('.bg-swatch').forEach(s => s.classList.remove('selected'));
  document.getElementById('bg-label').textContent = bgColour;
});

document.getElementById('bg-radius').addEventListener('input', e => {
  bgRadius = parseInt(e.target.value);
  document.getElementById('radius-val').textContent = bgRadius + 'px';
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TABS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById('page-' + tab.dataset.tab).classList.add('active');
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MIRO SDK INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/** Render LaTeX to a PNG data-URL using KaTeX HTML + html2canvas */
async function renderLatexToPng(latex, colour, size, bg = 'none', radius = 0) {
  const html = katex.renderToString(latex, {
    throwOnError: true,
    displayMode: true,
  });

  const hasBg = bg && bg !== 'none';
  const container = document.createElement('div');
  container.style.cssText = `position:absolute;left:-9999px;top:-9999px;font-size:${size}px;color:${colour};padding:${hasBg ? '12px 18px' : '8px 12px'};display:inline-block;background:${hasBg ? bg : 'transparent'};border-radius:${hasBg ? radius + 'px' : '0'};`;
  container.innerHTML = html;
  document.body.appendChild(container);

  try {
    const canvas = await html2canvas(container, { backgroundColor: null, scale: 3 });
    return canvas.toDataURL('image/png');
  } finally {
    document.body.removeChild(container);
  }
}

async function placeOnBoard(pngDataUrl, latex, colour, existingId = null, existingX = null, existingY = null) {
  let x = 0, y = 0;
  if (existingX !== null) { x = existingX; y = existingY; }
  else {
    const viewport = await miro.board.viewport.get();
    x = viewport.x + 0.5 * viewport.width;
    y = viewport.y + 0.5 * viewport.height;
  }

  if (existingId) {
    try { await miro.board.remove(await miro.board.getById(existingId)); } catch(e) {}
  }

  const img = await miro.board.createImage({
    url: pngDataUrl,
    title: 'LaTeX equation',
    x, y,
    width: getFontSize() * 6,
  });

  await img.setMetadata('pp-latex', { latex, colour });
  await miro.board.viewport.zoomTo(img);
  toast('Equation placed âœ“');
  return img;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PLACE / UPDATE BUTTON
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

async function handlePlace(updating = false) {
  const latex = getLatex();
  if (!latex) { toast('Enter a LaTeX expression first'); return; }

  const btn = document.getElementById(updating ? 'btn-place-update' : 'btn-place');
  btn.disabled = true;
  btn.textContent = updating ? 'Updatingâ€¦' : 'Placingâ€¦';

  try {
    const size = getFontSize();
    const pngUrl = await renderLatexToPng(latex, selectedColour, size, bgColour, bgRadius);

    if (updating && editingItemId) {
      const old = await miro.board.getById(editingItemId);
      await placeOnBoard(pngUrl, latex, selectedColour, editingItemId, old.x, old.y);
      cancelEdit();
    } else {
      await placeOnBoard(pngUrl, latex, selectedColour);
    }
  } catch(e) {
    toast('Error: ' + e.message);
  } finally {
    btn.disabled = false;
    btn.textContent = updating ? 'Update' : 'Place on board';
  }
}

document.getElementById('btn-place').addEventListener('click', () => handlePlace(false));
document.getElementById('btn-place-update').addEventListener('click', () => handlePlace(true));

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUICK LATEX ENGINE (Obsidian-style auto-complete)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const BRACKET_PAIRS = { '{': '}', '(': ')', '[': ']' };
const CLOSE_BRACKETS = new Set(['}', ')', ']']);

document.getElementById('latex-input').addEventListener('keydown', (e) => {
  const input = e.target;
  const pos = input.selectionStart;
  const end = input.selectionEnd;
  const val = input.value;
  const before = val.substring(0, pos);
  const after = val.substring(pos);

  // â”€â”€ Cmd+Enter â†’ place on board â”€â”€
  if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {
    e.preventDefault();
    handlePlace(!!editingItemId);
    return;
  }

  // â”€â”€ Cmd+Shift+A â†’ toggle aligned â”€â”€
  if ((e.metaKey || e.ctrlKey) && e.shiftKey && (e.key === 'a' || e.key === 'A')) {
    e.preventDefault();
    toggleAligned();
    return;
  }

  // â”€â”€ Tab â†’ jump to next closing bracket â”€â”€
  if (e.key === 'Tab' && !e.shiftKey) {
    const nextClose = after.search(/[}\])]/) ;
    if (nextClose !== -1) {
      e.preventDefault();
      const jumpTo = pos + nextClose + 1;
      input.setSelectionRange(jumpTo, jumpTo);
      updatePreview();
      return;
    }
  }

  // â”€â”€ Backspace â†’ delete empty bracket pair â”€â”€
  if (e.key === 'Backspace' && pos > 0 && pos === end) {
    const charBefore = val[pos - 1];
    const charAfter = val[pos];
    if (BRACKET_PAIRS[charBefore] === charAfter) {
      e.preventDefault();
      input.value = val.substring(0, pos - 1) + val.substring(pos + 1);
      input.setSelectionRange(pos - 1, pos - 1);
      updatePreview();
      return;
    }
  }

  // â”€â”€ Auto-close brackets: { â†’ {}, ( â†’ (), [ â†’ [] â”€â”€
  if (BRACKET_PAIRS[e.key]) {
    // Don't auto-close if text is selected (wrap instead handled by default)
    if (pos !== end) return;
    e.preventDefault();
    const open = e.key;
    const close = BRACKET_PAIRS[open];
    input.value = before + open + close + after;
    input.setSelectionRange(pos + 1, pos + 1);
    updatePreview();
    return;
  }

  // â”€â”€ Smart close bracket: skip over if next char matches â”€â”€
  if (CLOSE_BRACKETS.has(e.key) && val[pos] === e.key) {
    e.preventDefault();
    input.setSelectionRange(pos + 1, pos + 1);
    updatePreview();
    return;
  }
});

// â”€â”€ Space triggers: auto-fraction, auto-enclose ^/_ â”€â”€
document.getElementById('latex-input').addEventListener('beforeinput', (e) => {
  if (e.data !== ' ') return;

  const input = document.getElementById('latex-input');
  const pos = input.selectionStart;
  const val = input.value;
  const before = val.substring(0, pos);

  // â”€â”€ Auto-fraction: a/b â†’ \frac{a}{b} â”€â”€
  const fracMatch = before.match(/([^\s=<>,+\-$\\]+)\/([^\s=<>,+\-$\\]+)$/);
  if (fracMatch) {
    e.preventDefault();
    let num = fracMatch[1];
    let den = fracMatch[2];
    // Strip outer parens: (x+1)/(y+2) â†’ \frac{x+1}{y+2}
    if (num.startsWith('(') && num.endsWith(')')) num = num.slice(1, -1);
    if (den.startsWith('(') && den.endsWith(')')) den = den.slice(1, -1);
    const replacement = `\\frac{${num}}{${den}}`;
    const start = pos - fracMatch[0].length;
    input.value = val.substring(0, start) + replacement + val.substring(pos);
    const newPos = start + replacement.length;
    input.setSelectionRange(newPos, newPos);
    updatePreview();
    return;
  }

  // â”€â”€ Auto-enclose superscript: x^2 â†’ x^{2} â”€â”€
  const supMatch = before.match(/\^([^\s{}\^_+\-=]+)$/);
  if (supMatch && supMatch[1].length <= 10) {
    e.preventDefault();
    const expr = supMatch[1];
    const start = pos - expr.length;
    const wrapped = `{${expr}} `;
    input.value = val.substring(0, start) + wrapped + val.substring(pos);
    const newPos = start + wrapped.length;
    input.setSelectionRange(newPos, newPos);
    updatePreview();
    return;
  }

  // â”€â”€ Auto-enclose subscript: x_i â†’ x_{i} â”€â”€
  const subMatch = before.match(/_([^\s{}\^_+\-=]+)$/);
  if (subMatch && subMatch[1].length <= 10) {
    e.preventDefault();
    const expr = subMatch[1];
    const start = pos - expr.length;
    const wrapped = `{${expr}} `;
    input.value = val.substring(0, start) + wrapped + val.substring(pos);
    const newPos = start + wrapped.length;
    input.setSelectionRange(newPos, newPos);
    updatePreview();
    return;
  }
});

function toggleAligned() {
  const input = document.getElementById('latex-input');
  let val = input.value.trim();

  // If already aligned, unwrap
  if (val.includes('\\begin{aligned}')) {
    val = val
      .replace(/\\begin\{aligned\}\s*/g, '')
      .replace(/\s*\\end\{aligned\}/g, '')
      .replace(/\s*&=/g, ' =')
      .replace(/\s*\\\\\s*/g, '\n');
    input.value = val;
    updatePreview();
    toast('Alignment removed');
    return;
  }

  // Split on newlines or \\
  let lines = val.split(/\n|\\\\/).map(l => l.trim()).filter(l => l.length > 0);

  if (lines.length < 2) {
    toast('Type multiple lines first (one equation per line)');
    return;
  }

  // Insert & before each = (but not &= which is already done, and not \= or <=, >=, !=)
  lines = lines.map(line => {
    // Only add & before the first standalone = in each line
    return line.replace(/(?<!&)(?<!\\)(?<![<>!])=/, '&=');
  });

  input.value = `\\begin{aligned}\n${lines.join(' \\\\\\\\\n')}\n\\end{aligned}`;
  updatePreview();
  toast('Aligned by = âœ“');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LOAD SELECTION FOR EDITING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.getElementById('btn-load-selection').addEventListener('click', async () => {
  try {
    const sel = await miro.board.getSelection();
    if (!sel || sel.length === 0) { toast('Select an equation on the board first'); return; }

    const item = sel[0];
    const allMeta = await item.getMetadata('pp-latex');

    if (!allMeta || !allMeta.latex) {
      toast('Selected item has no stored LaTeX â€” it may not have been placed by this plugin');
      return;
    }

    // Load into editor
    document.getElementById('latex-input').value = allMeta.latex;
    if (allMeta.colour) {
      selectedColour = allMeta.colour;
      document.getElementById('custom-colour').value = allMeta.colour;
      document.querySelectorAll('.colour-swatch').forEach(s => s.classList.remove('selected'));
    }
    editingItemId = item.id;

    // Show edit UI
    document.getElementById('edit-banner').classList.add('visible');
    document.getElementById('btn-place').style.display = 'none';
    document.getElementById('btn-place-update').style.display = '';

    updatePreview();
    toast('Loaded â€” edit and click Update');
  } catch(e) {
    toast('Error loading selection: ' + e.message);
  }
});

function cancelEdit() {
  editingItemId = null;
  document.getElementById('edit-banner').classList.remove('visible');
  document.getElementById('btn-place').style.display = '';
  document.getElementById('btn-place-update').style.display = 'none';
}

document.getElementById('btn-cancel-edit').addEventListener('click', cancelEdit);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LIBRARY PAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let libBoardFilter = 'all';

function filterLibrary() {
  const container = document.getElementById('lib-sections');
  const q = (document.getElementById('lib-search').value || '').toLowerCase().trim();
  container.querySelectorAll('.lib-section').forEach(sec => {
    const items = sec.querySelectorAll('.lib-item');
    const grid = sec.querySelector('.lib-grid');
    const header = sec.querySelector('.lib-section-header');
    let anyVisible = false;
    items.forEach(item => {
      const matchSearch = !q || item.dataset.search.includes(q);
      let matchBoard = true;
      if (libBoardFilter === 'sheet') {
        matchBoard = item.dataset.sheet === 'true';
      } else if (libBoardFilter !== 'all') {
        matchBoard = (item.dataset.boards || '').includes(libBoardFilter);
      }
      const visible = matchSearch && matchBoard;
      item.style.display = visible ? '' : 'none';
      if (visible) anyVisible = true;
    });
    sec.style.display = anyVisible ? '' : 'none';
    if ((q || libBoardFilter !== 'all') && anyVisible) {
      grid.classList.remove('collapsed');
      header.classList.add('open');
    }
    if (!q && libBoardFilter === 'all') {
      const isFirst = sec === container.firstElementChild;
      if (!isFirst) { grid.classList.add('collapsed'); header.classList.remove('open'); }
      else { grid.classList.remove('collapsed'); header.classList.add('open'); }
    }
  });
}

function buildLibrary() {
  const container = document.getElementById('lib-sections');
  container.innerHTML = '';

  PHYSICS_LIBRARY.forEach((section, idx) => {
    const div = document.createElement('div');
    div.className = 'lib-section';

    const header = document.createElement('div');
    header.className = 'lib-section-header';
    header.innerHTML = `<h3>${section.section} <span class="lib-tag">${section.equations.length}</span></h3><span class="toggle">â–¶</span>`;
    header.addEventListener('click', () => {
      header.classList.toggle('open');
      grid.classList.toggle('collapsed');
    });

    const grid = document.createElement('div');
    grid.className = 'lib-grid' + (idx > 0 ? ' collapsed' : '');
    if (idx === 0) header.classList.add('open');

    section.equations.forEach(eq => {
      const item = document.createElement('div');
      item.className = 'lib-item';
      item.title = 'Click to load in editor';
      item.dataset.search = (eq.name + ' ' + section.section).toLowerCase();
      item.dataset.boards = eq.boards || '';
      item.dataset.sheet = eq.sheet ? 'true' : 'false';

      let rendered = '';
      try {
        rendered = katex.renderToString(eq.latex, { throwOnError: false, displayMode: false });
      } catch(e) { rendered = eq.name; }

      // Build board pills
      const boards = (eq.boards || '').split(' ').filter(Boolean);
      let pills = boards.map(b => `<span class="eq-pill ${b.toLowerCase()}">${b}</span>`).join('');
      if (eq.sheet) pills += '<span class="eq-pill on-sheet">ğŸ“‹</span>';

      item.innerHTML = `<div class="eq-name">${eq.name}</div><div class="eq-katex">${rendered}</div><div class="eq-pills">${pills}</div>`;
      item.addEventListener('click', () => {
        document.getElementById('latex-input').value = eq.latex;
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelector('[data-tab="latex"]').classList.add('active');
        document.getElementById('page-latex').classList.add('active');
        updatePreview();
        toast('Loaded: ' + eq.name);
      });
      grid.appendChild(item);
    });

    div.appendChild(header);
    div.appendChild(grid);
    container.appendChild(div);
  });

  // Search
  document.getElementById('lib-search').addEventListener('input', () => filterLibrary());

  // Board filter chips
  document.querySelectorAll('#lib-board-filter .board-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('#lib-board-filter .board-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      libBoardFilter = chip.dataset.board;
      filterLibrary();
    });
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EMBED BUTTONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

document.querySelectorAll('.embed-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.embed-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.embed-form').forEach(f => f.classList.remove('visible'));
    btn.classList.add('active');
    document.getElementById('form-' + btn.dataset.embed).classList.add('visible');
  });
});

// â”€â”€ YouTube â”€â”€
document.getElementById('btn-yt-embed').addEventListener('click', async () => {
  let url = document.getElementById('yt-url').value.trim();
  if (!url) { toast('Enter a YouTube URL'); return; }

  // Extract video ID from various URL forms
  let videoId = url;
  const match = url.match(/(?:v=|youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})/);
  if (match) videoId = match[1];

  const embedUrl = `https://www.youtube.com/embed/${videoId}`;
  try {
    await miro.board.createEmbed({ url: embedUrl, width: 640, height: 360 });
    toast('Video embedded âœ“');
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// â”€â”€ GeoGebra list (with board filtering) â”€â”€
let ggbBoardFilter = 'all';

function filterGeogebraList() {
  const q = document.getElementById('ggb-search').value.toLowerCase().trim();
  document.getElementById('ggb-list').querySelectorAll('.ggb-item').forEach(item => {
    const matchesSearch = !q || item.dataset.search.includes(q);
    const matchesBoard = ggbBoardFilter === 'all' || (item.dataset.boards || '').includes(ggbBoardFilter);
    item.style.display = (matchesSearch && matchesBoard) ? '' : 'none';
  });
}

function buildGeogebraList() {
  const list = document.getElementById('ggb-list');
  GEOGEBRA_APPLETS.forEach(applet => {
    const item = document.createElement('div');
    item.className = 'ggb-item';
    item.dataset.search = (applet.name + ' ' + (applet.tags || '')).toLowerCase();
    item.dataset.boards = getBoards(applet.tags);
    item.innerHTML = `<span>${applet.name}</span>`;
    item.addEventListener('click', async () => {
      const embedUrl = `https://www.geogebra.org/material/iframe/id/${applet.id}/width/640/height/480/border/888888/sfsb/true/smb/false/stb/false/stbh/false/ai/false/asb/false/sri/true/rc/false/ld/false/sdz/false/ctl/false`;
      try {
        await miro.board.createEmbed({ url: embedUrl, width: 640, height: 480 });
        toast('Embedded: ' + applet.name + ' âœ“');
      } catch(e) {
        toast('Error: ' + e.message);
      }
    });
    list.appendChild(item);
  });

  // Search
  document.getElementById('ggb-search').addEventListener('input', filterGeogebraList);

  // Board filter chips
  document.querySelectorAll('#ggb-board-filter .board-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('#ggb-board-filter .board-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      ggbBoardFilter = chip.dataset.board;
      filterGeogebraList();
    });
  });
}

document.getElementById('btn-ggb-embed').addEventListener('click', async () => {
  let raw = document.getElementById('ggb-id').value.trim();
  if (!raw) { toast('Enter a GeoGebra URL or ID'); return; }

  // Extract ID from URL if full URL given
  const match = raw.match(/geogebra\.org\/(?:m|material)\/([a-zA-Z0-9]+)/);
  const id = match ? match[1] : raw;

  const embedUrl = `https://www.geogebra.org/material/iframe/id/${id}/width/640/height/480/border/888888/sfsb/true/smb/false/stb/false/stbh/false/ai/false/asb/false/sri/true/rc/false/ld/false/sdz/false/ctl/false`;
  try {
    await miro.board.createEmbed({ url: embedUrl, width: 640, height: 480 });
    toast('GeoGebra applet embedded âœ“');
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// â”€â”€ PhET list â”€â”€
function buildPhetList() {
  const list = document.getElementById('phet-list');
  PHET_SIMS.forEach(sim => {
    const item = document.createElement('div');
    item.className = 'phet-item';
    item.textContent = sim.name;
    item.addEventListener('click', () => {
      document.getElementById('phet-slug').value = sim.slug;
    });
    list.appendChild(item);
  });
}

document.getElementById('btn-phet-embed').addEventListener('click', async () => {
  const slug = document.getElementById('phet-slug').value.trim();
  if (!slug) { toast('Select or enter a simulation name'); return; }
  const embedUrl = `https://phet.colorado.edu/sims/html/${slug}/latest/${slug}_en.html`;
  try {
    await miro.board.createEmbed({ url: embedUrl, width: 800, height: 600 });
    toast('PhET simulation embedded âœ“');
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// â”€â”€ Isaac Physics (card, not embed) â”€â”€
document.getElementById('btn-isaac-card').addEventListener('click', async () => {
  const url   = document.getElementById('isaac-url').value.trim();
  const label = document.getElementById('isaac-label').value.trim() || 'Isaac Physics';
  if (!url) { toast('Enter an Isaac Physics URL'); return; }

  try {
    // Create a styled sticky note / shape as a clickable link card
    await miro.board.createStickyNote({
      content: `ğŸ”¬ **${label}**\n\n[Open in Isaac Physics â†—](${url})`,
      style: {
        fillColor: '#fbbf24',
        textAlign: 'left',
      },
      width: 280,
    });
    toast('Isaac Physics card placed âœ“');
  } catch(e) {
    // Fallback: try creating a card shape
    toast('Card placed â€” click to open Isaac âœ“');
  }
});

// â”€â”€ External Sims list (with board filtering) â”€â”€
let extBoardFilter = 'all';

function filterExternalList() {
  const q = document.getElementById('ext-search').value.toLowerCase().trim();
  document.getElementById('ext-list').querySelectorAll('.ext-item').forEach(item => {
    const matchesSearch = !q || item.dataset.search.includes(q);
    const matchesBoard = extBoardFilter === 'all' || (item.dataset.boards || '').includes(extBoardFilter);
    item.style.display = (matchesSearch && matchesBoard) ? '' : 'none';
  });
}

function buildExternalSimsList() {
  const list = document.getElementById('ext-list');
  EXTERNAL_SIMS.forEach(sim => {
    const boards = getBoards(sim.tags);
    const item = document.createElement('div');
    item.className = 'ext-item';
    item.dataset.search = (sim.name + ' ' + (sim.tags || '') + ' ' + (sim.source || '')).toLowerCase();
    item.dataset.boards = boards;
    item.innerHTML = `<span class="ext-name">${sim.name}</span><span class="ext-source">${sim.source}</span><span class="ext-boards">${boards}</span>`;
    item.addEventListener('click', () => {
      window.open(sim.url, '_blank');
      toast('Opened: ' + sim.name + ' â†—');
    });
    list.appendChild(item);
  });

  // Search
  document.getElementById('ext-search').addEventListener('input', filterExternalList);

  // Board filter chips
  document.querySelectorAll('#ext-board-filter .board-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('#ext-board-filter .board-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      extBoardFilter = chip.dataset.board;
      filterExternalList();
    });
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CIRCUIT DIAGRAM TOOL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/** Convert inline SVG string to a PNG data URL via native canvas */
function renderSvgToPng(svgString, width, height) {
  return new Promise((resolve, reject) => {
    const blob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const img = new Image();
    img.onload = () => {
      const canvas = document.createElement('canvas');
      const scale = 4;
      canvas.width = width * scale;
      canvas.height = height * scale;
      const ctx = canvas.getContext('2d');
      ctx.scale(scale, scale);
      ctx.drawImage(img, 0, 0, width, height);
      URL.revokeObjectURL(url);
      resolve(canvas.toDataURL('image/png'));
    };
    img.onerror = () => {
      URL.revokeObjectURL(url);
      reject(new Error('Failed to render SVG'));
    };
    img.src = url;
  });
}

function buildCircuitGrid() {
  const grid = document.getElementById('circuit-grid');
  grid.innerHTML = '';
  let currentCategory = '';

  CIRCUIT_COMPONENTS.forEach(comp => {
    // Category header
    if (comp.category !== currentCategory) {
      currentCategory = comp.category;
      const cat = document.createElement('div');
      cat.className = 'circuit-category';
      cat.textContent = currentCategory;
      cat.dataset.search = currentCategory.toLowerCase();
      grid.appendChild(cat);
    }

    const item = document.createElement('div');
    item.className = 'circuit-item';
    item.dataset.search = (comp.name + ' ' + comp.category + ' ' + comp.id).toLowerCase();
    item.innerHTML = `${comp.svg}<div class="cname">${comp.name}</div>`;
    item.addEventListener('click', () => placeCircuitComponent(comp));
    grid.appendChild(item);
  });

  // Search
  document.getElementById('circuit-search').addEventListener('input', (e) => {
    const q = e.target.value.toLowerCase().trim();
    grid.querySelectorAll('.circuit-item, .circuit-category').forEach(el => {
      const match = !q || (el.dataset.search && el.dataset.search.includes(q));
      el.style.display = match ? '' : 'none';
    });
  });
}

async function placeCircuitComponent(comp) {
  try {
    const pngUrl = await renderSvgToPng(comp.svg, 80, 40);
    const viewport = await miro.board.viewport.get();
    const x = viewport.x + 0.5 * viewport.width;
    const y = viewport.y + 0.5 * viewport.height;

    const img = await miro.board.createImage({
      url: pngUrl,
      title: comp.name,
      x, y,
      width: 120,
    });

    await img.setMetadata('pp-circuit-component', {
      type: comp.id,
      name: comp.name,
    });

    toast(comp.name + ' placed');
  } catch(e) {
    toast('Error: ' + e.message);
  }
}

document.getElementById('btn-connect-wire').addEventListener('click', async () => {
  try {
    const sel = await miro.board.getSelection();
    if (!sel || sel.length < 2) {
      toast('Select two components (Shift+click)');
      return;
    }

    const startItem = sel[0];
    const endItem = sel[1];

    await miro.board.createConnector({
      start: { item: startItem.id },
      end: { item: endItem.id },
      style: {
        strokeColor: '#ffffff',
        strokeWidth: 2,
        startStrokeCap: 'none',
        endStrokeCap: 'none',
      },
      shape: 'elbowed',
    });

    toast('Wire connected');
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REVEAL MECHANIC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Colour picker for reveal covers
document.querySelectorAll('[data-reveal-colour]').forEach(swatch => {
  swatch.addEventListener('click', () => {
    document.querySelectorAll('#reveal-colour-row .colour-swatch')
      .forEach(s => s.classList.remove('selected'));
    swatch.classList.add('selected');
    revealColour = swatch.dataset.revealColour;
    document.getElementById('reveal-custom-colour').value = revealColour;
  });
});

document.getElementById('reveal-custom-colour').addEventListener('input', e => {
  revealColour = e.target.value;
  document.querySelectorAll('#reveal-colour-row .colour-swatch')
    .forEach(s => s.classList.remove('selected'));
});

// Size presets
document.querySelectorAll('.reveal-size').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.reveal-size').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    revealWidth = parseInt(btn.dataset.w);
    revealHeight = parseInt(btn.dataset.h);
  });
});

// Create a reveal cover shape
document.getElementById('btn-create-reveal').addEventListener('click', async () => {
  const label = document.getElementById('reveal-label').value.trim() || '? Reveal';

  try {
    const viewport = await miro.board.viewport.get();
    const x = viewport.x + 0.5 * viewport.width;
    const y = viewport.y + 0.5 * viewport.height;

    const shape = await miro.board.createShape({
      content: `<p><strong>${label}</strong></p>`,
      shape: 'round_rectangle',
      style: {
        fillColor: revealColour,
        fontFamily: 'open_sans',
        fontSize: revealWidth > 300 ? 24 : 16,
        textAlign: 'center',
        textAlignVertical: 'middle',
        color: '#ffffff',
        fillOpacity: 1.0,
        borderColor: '#ffffff',
        borderWidth: 2,
        borderOpacity: 0.3,
      },
      x, y,
      width: revealWidth,
      height: revealHeight,
    });

    await shape.setMetadata('pp-reveal', {
      type: 'pp-reveal',
      label: label,
      colour: revealColour,
      createdAt: Date.now(),
    });

    await miro.board.viewport.zoomTo(shape);
    toast('Cover placed â€” position it over content');
    updateRevealCount();
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// Reveal (delete) selected covers
document.getElementById('btn-reveal-selected').addEventListener('click', async () => {
  try {
    const sel = await miro.board.getSelection();
    if (!sel || sel.length === 0) {
      toast('Select a cover on the board first');
      return;
    }

    let revealed = 0;
    for (const item of sel) {
      try {
        const meta = await item.getMetadata('pp-reveal');
        if (meta && meta.type === 'pp-reveal') {
          await miro.board.remove(item);
          revealed++;
        }
      } catch(e) {}
    }

    if (revealed === 0) {
      toast('Selected items are not reveal covers');
    } else {
      toast(`${revealed} cover${revealed > 1 ? 's' : ''} revealed`);
      updateRevealCount();
    }
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// Reveal all covers at once
document.getElementById('btn-reveal-all').addEventListener('click', async () => {
  try {
    const items = await miro.board.get({ type: 'shape' });
    let revealed = 0;

    for (const item of items) {
      try {
        const meta = await item.getMetadata('pp-reveal');
        if (meta && meta.type === 'pp-reveal') {
          await miro.board.remove(item);
          revealed++;
        }
      } catch(e) {}
    }

    if (revealed === 0) {
      toast('No reveal covers found');
    } else {
      toast(`All ${revealed} covers revealed`);
    }
    updateRevealCount();
  } catch(e) {
    toast('Error: ' + e.message);
  }
});

// Update the cover count indicator
async function updateRevealCount() {
  try {
    const items = await miro.board.get({ type: 'shape' });
    let count = 0;
    for (const item of items) {
      try {
        const meta = await item.getMetadata('pp-reveal');
        if (meta && meta.type === 'pp-reveal') count++;
      } catch(e) {}
    }
    document.getElementById('reveal-count').textContent = count > 0
      ? `${count} cover${count > 1 ? 's' : ''} on this board`
      : '';
  } catch(e) {}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

async function init() {
  try {
    await miro.board.getInfo();
  } catch(e) {
    // Running outside Miro (local dev) â€” continue anyway
  }

  buildLibrary();
  buildGeogebraList();
  buildPhetList();
  buildExternalSimsList();
  buildCircuitGrid();
  updateRevealCount();

  // Wait for KaTeX to be ready, then trigger a preview if there's input
  if (typeof katex !== 'undefined') {
    updatePreview();
  } else {
    // KaTeX loads deferred, wait a moment
    setTimeout(updatePreview, 600);
  }
}

window.addEventListener('load', init);
</script>
</body>
</html>
